!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["pzl-stream-lib.node"]=e():t["pzl-stream-lib.node"]=e()}(global,()=>(()=>{var t={4456(t){t.exports=function(){var t=Object.prototype.toString,e=function(){function t(t){this.name="InvalidStateError",this.message=t}return t.prototype=new Error,t.prototype.constructor=t,t}();function r(r,n){if("function"==typeof r&&(r=r()),"[object Object]"!==t.call(r))throw new e("Stately.js: Invalid states object: `"+r+"`.");function o(t,e){for(var r in s[t])if(s[t].hasOwnProperty(r)&&r.toLowerCase()===e.toLowerCase())return s[t][r]}var i,s={getMachineState:function(){return i.name},setMachineState:function t(r){var n,c,a=arguments[1],u=i;if("string"==typeof r&&(r=s[r]),!r||!r.name||!s[r.name])throw new e("Stately.js: Transitioned into invalid state: `"+t.caller+"`.");return i=r,(c=o(u.name,"onLeave"))&&"function"==typeof c&&c.call(s,a,u.name,i.name),(n=o(i.name,"onEnter"))&&"function"==typeof n&&n.call(s,a,u.name,r.name),this},getMachineEvents:function(){var t=[];for(var e in i)i.hasOwnProperty(e)&&"function"==typeof i[e]&&t.push(e);return t}},c={getMachineState:s.getMachineState,getMachineEvents:s.getMachineEvents},a=function(e,r,n){return function(){var a,u,l,h=c;return s[e]!==i?(n&&(h=n.apply(s,arguments)),h):((a=o(i.name,"onBefore"+r))&&"function"==typeof a&&a.call(s,r,i.name,i.name),void 0===(h=s[e][r].apply(s,arguments))?(l=i,h=c):"string"==typeof h?(l=s[h],h=c):"[object Object]"===t.call(h)?(l=h===s?i:h,h=c):"[object Array]"===t.call(h)&&h.length>=1&&(l="string"==typeof h[0]?s[h[0]]:h[0],h=h[1]),(u=o(i.name,"onAfter"+r))&&"function"==typeof u&&u.call(s,r,i.name,l.name),s.setMachineState(l,r),h)}};for(var u in r)if(r.hasOwnProperty(u)){for(var l in s[u]=r[u],s[u])s[u].hasOwnProperty(l)&&("string"==typeof s[u][l]&&(s[u][l]=function(t){return function(){return this[t]}}(s[u][l])),"function"!=typeof s[u][l]||/^onEnter$/i.test(l)||/^onLeave$/i.test(l)||/^onBefore/i.test(l)||/^onAfter/i.test(l)||(c[l]=a(u,l,c[l])));s[u].name=u,i||(i=s[u])}if(void 0!==s[n]&&(i=s[n]),!i)throw new e("Stately.js: Invalid initial state.");return c}return r.machine=function(t,e){return new r(t,e)},r.InvalidStateError=e,r}()},9306(t,e,r){"use strict";var n=r(4901),o=r(6823),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a function")}},5548(t,e,r){"use strict";var n=r(3517),o=r(6823),i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not a constructor")}},3506(t,e,r){"use strict";var n=r(3925),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},6469(t,e,r){"use strict";var n=r(8227),o=r(2360),i=r(4913).f,s=n("unscopables"),c=Array.prototype;void 0===c[s]&&i(c,s,{configurable:!0,value:o(null)}),t.exports=function(t){c[s][t]=!0}},7829(t,e,r){"use strict";var n=r(8183).charAt;t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},679(t,e,r){"use strict";var n=r(1625),o=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new o("Incorrect invocation")}},8551(t,e,r){"use strict";var n=r(34),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw new i(o(t)+" is not an object")}},7811(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},4644(t,e,r){"use strict";var n,o,i,s=r(7811),c=r(3724),a=r(4576),u=r(4901),l=r(34),h=r(9297),p=r(6955),f=r(6823),g=r(6699),d=r(6840),v=r(2106),b=r(1625),y=r(2787),_=r(2967),m=r(8227),w=r(3392),S=r(1181),E=S.enforce,O=S.get,C=a.Int8Array,T=C&&C.prototype,x=a.Uint8ClampedArray,k=x&&x.prototype,P=C&&y(C),I=T&&y(T),R=Object.prototype,j=a.TypeError,A=m("toStringTag"),D=w("TYPED_ARRAY_TAG"),M="TypedArrayConstructor",L=s&&!!_&&"Opera"!==p(a.opera),N=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},H=function(t){var e=y(t);if(l(e)){var r=O(e);return r&&h(r,M)?r[M]:H(e)}},B=function(t){if(!l(t))return!1;var e=p(t);return h(F,e)||h(U,e)};for(n in F)(i=(o=a[n])&&o.prototype)?E(i)[M]=o:L=!1;for(n in U)(i=(o=a[n])&&o.prototype)&&(E(i)[M]=o);if((!L||!u(P)||P===Function.prototype)&&(P=function(){throw new j("Incorrect invocation")},L))for(n in F)a[n]&&_(a[n],P);if((!L||!I||I===R)&&(I=P.prototype,L))for(n in F)a[n]&&_(a[n].prototype,I);if(L&&y(k)!==I&&_(k,I),c&&!h(I,A))for(n in N=!0,v(I,A,{configurable:!0,get:function(){return l(this)?this[D]:void 0}}),F)a[n]&&g(a[n],D,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:L,TYPED_ARRAY_TAG:N&&D,aTypedArray:function(t){if(B(t))return t;throw new j("Target is not a typed array")},aTypedArrayConstructor:function(t){if(u(t)&&(!_||b(P,t)))return t;throw new j(f(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,r,n){if(c){if(r)for(var o in F){var i=a[o];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(r){try{i.prototype[t]=e}catch(t){}}}I[t]&&!r||d(I,t,r?e:L&&T[t]||e,n)}},exportTypedArrayStaticMethod:function(t,e,r){var n,o;if(c){if(_){if(r)for(n in F)if((o=a[n])&&h(o,t))try{delete o[t]}catch(t){}if(P[t]&&!r)return;try{return d(P,t,r?e:L&&P[t]||e)}catch(t){}}for(n in F)!(o=a[n])||o[t]&&!r||d(o,t,e)}},getTypedArrayConstructor:H,isView:function(t){if(!l(t))return!1;var e=p(t);return"DataView"===e||h(F,e)||h(U,e)},isTypedArray:B,TypedArray:P,TypedArrayPrototype:I}},6346(t,e,r){"use strict";var n=r(4576),o=r(9504),i=r(3724),s=r(7811),c=r(350),a=r(6699),u=r(2106),l=r(6279),h=r(9039),p=r(679),f=r(1291),g=r(8014),d=r(7696),v=r(5617),b=r(8490),y=r(2787),_=r(2967),m=r(4373),w=r(7680),S=r(3167),E=r(7740),O=r(687),C=r(1181),T=c.PROPER,x=c.CONFIGURABLE,k="ArrayBuffer",P="DataView",I="prototype",R="Wrong index",j=C.getterFor(k),A=C.getterFor(P),D=C.set,M=n[k],L=M,N=L&&L[I],F=n[P],U=F&&F[I],H=Object.prototype,B=n.Array,W=n.RangeError,q=o(m),V=o([].reverse),G=b.pack,z=b.unpack,K=function(t){return[255&t]},$=function(t){return[255&t,t>>8&255]},Y=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},J=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},X=function(t){return G(v(t),23,4)},Q=function(t){return G(t,52,8)},Z=function(t,e,r){u(t[I],e,{configurable:!0,get:function(){return r(this)[e]}})},tt=function(t,e,r,n){var o=A(t),i=d(r),s=!!n;if(i+e>o.byteLength)throw new W(R);var c=o.bytes,a=i+o.byteOffset,u=w(c,a,a+e);return s?u:V(u)},et=function(t,e,r,n,o,i){var s=A(t),c=d(r),a=n(+o),u=!!i;if(c+e>s.byteLength)throw new W(R);for(var l=s.bytes,h=c+s.byteOffset,p=0;p<e;p++)l[h+p]=a[u?p:e-p-1]};if(s){var rt=T&&M.name!==k;h(function(){M(1)})&&h(function(){new M(-1)})&&!h(function(){return new M,new M(1.5),new M(NaN),1!==M.length||rt&&!x})?rt&&x&&a(M,"name",k):((L=function(t){return p(this,N),S(new M(d(t)),this,L)})[I]=N,N.constructor=L,E(L,M)),_&&y(U)!==H&&_(U,H);var nt=new F(new L(2)),ot=o(U.setInt8);nt.setInt8(0,2147483648),nt.setInt8(1,2147483649),!nt.getInt8(0)&&nt.getInt8(1)||l(U,{setInt8:function(t,e){ot(this,t,e<<24>>24)},setUint8:function(t,e){ot(this,t,e<<24>>24)}},{unsafe:!0})}else N=(L=function(t){p(this,N);var e=d(t);D(this,{type:k,bytes:q(B(e),0),byteLength:e}),i||(this.byteLength=e,this.detached=!1)})[I],U=(F=function(t,e,r){p(this,U),p(t,N);var n=j(t),o=n.byteLength,s=f(e);if(s<0||s>o)throw new W("Wrong offset");if(s+(r=void 0===r?o-s:g(r))>o)throw new W("Wrong length");D(this,{type:P,buffer:t,byteLength:r,byteOffset:s,bytes:n.bytes}),i||(this.buffer=t,this.byteLength=r,this.byteOffset=s)})[I],i&&(Z(L,"byteLength",j),Z(F,"buffer",A),Z(F,"byteLength",A),Z(F,"byteOffset",A)),l(U,{getInt8:function(t){return tt(this,1,t)[0]<<24>>24},getUint8:function(t){return tt(this,1,t)[0]},getInt16:function(t){var e=tt(this,2,t,arguments.length>1&&arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=tt(this,2,t,arguments.length>1&&arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return J(tt(this,4,t,arguments.length>1&&arguments[1]))},getUint32:function(t){return J(tt(this,4,t,arguments.length>1&&arguments[1]))>>>0},getFloat32:function(t){return z(tt(this,4,t,arguments.length>1&&arguments[1]),23)},getFloat64:function(t){return z(tt(this,8,t,arguments.length>1&&arguments[1]),52)},setInt8:function(t,e){et(this,1,t,K,e)},setUint8:function(t,e){et(this,1,t,K,e)},setInt16:function(t,e){et(this,2,t,$,e,arguments.length>2&&arguments[2])},setUint16:function(t,e){et(this,2,t,$,e,arguments.length>2&&arguments[2])},setInt32:function(t,e){et(this,4,t,Y,e,arguments.length>2&&arguments[2])},setUint32:function(t,e){et(this,4,t,Y,e,arguments.length>2&&arguments[2])},setFloat32:function(t,e){et(this,4,t,X,e,arguments.length>2&&arguments[2])},setFloat64:function(t,e){et(this,8,t,Q,e,arguments.length>2&&arguments[2])}});O(L,k),O(F,P),t.exports={ArrayBuffer:L,DataView:F}},4373(t,e,r){"use strict";var n=r(8981),o=r(5610),i=r(6198);t.exports=function(t){for(var e=n(this),r=i(e),s=arguments.length,c=o(s>1?arguments[1]:void 0,r),a=s>2?arguments[2]:void 0,u=void 0===a?r:o(a,r);u>c;)e[c++]=t;return e}},5370(t,e,r){"use strict";var n=r(6198);t.exports=function(t,e,r){for(var o=0,i=arguments.length>2?r:n(e),s=new t(i);i>o;)s[o]=e[o++];return s}},9617(t,e,r){"use strict";var n=r(5397),o=r(5610),i=r(6198),s=function(t){return function(e,r,s){var c=n(e),a=i(c);if(0===a)return!t&&-1;var u,l=o(s,a);if(t&&r!=r){for(;a>l;)if((u=c[l++])!=u)return!0}else for(;a>l;l++)if((t||l in c)&&c[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},9213(t,e,r){"use strict";var n=r(6080),o=r(7055),i=r(8981),s=r(6198),c=r(1469),a=r(4659),u=function(t){var e=1===t,r=2===t,u=3===t,l=4===t,h=6===t,p=7===t,f=5===t||h;return function(g,d,v){for(var b,y,_=i(g),m=o(_),w=s(m),S=n(d,v),E=0,O=0,C=e?c(g,w):r||p?c(g,0):void 0;w>E;E++)if((f||E in m)&&(y=S(b=m[E],E,_),t))if(e)a(C,E,y);else if(y)switch(t){case 3:return!0;case 5:return b;case 6:return E;case 2:a(C,O++,b)}else switch(t){case 4:return!1;case 7:a(C,O++,b)}return h?-1:u||l?l:C}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},4598(t,e,r){"use strict";var n=r(9039);t.exports=function(t,e){var r=[][t];return!!r&&n(function(){r.call(null,e||function(){return 1},1)})}},926(t,e,r){"use strict";var n=r(9306),o=r(8981),i=r(7055),s=r(6198),c=TypeError,a="Reduce of empty array with no initial value",u=function(t){return function(e,r,u,l){var h=o(e),p=i(h),f=s(h);if(n(r),0===f&&u<2)throw new c(a);var g=t?f-1:0,d=t?-1:1;if(u<2)for(;;){if(g in p){l=p[g],g+=d;break}if(g+=d,t?g<0:f<=g)throw new c(a)}for(;t?g>=0:f>g;g+=d)g in p&&(l=r(l,p[g],g,h));return l}};t.exports={left:u(!1),right:u(!0)}},7680(t,e,r){"use strict";var n=r(9504);t.exports=n([].slice)},4488(t,e,r){"use strict";var n=r(7680),o=Math.floor,i=function(t,e){var r=t.length;if(r<8)for(var s,c,a=1;a<r;){for(c=a,s=t[a];c&&e(t[c-1],s)>0;)t[c]=t[--c];c!==a++&&(t[c]=s)}else for(var u=o(r/2),l=i(n(t,0,u),e),h=i(n(t,u),e),p=l.length,f=h.length,g=0,d=0;g<p||d<f;)t[g+d]=g<p&&d<f?e(l[g],h[d])<=0?l[g++]:h[d++]:g<p?l[g++]:h[d++];return t};t.exports=i},7433(t,e,r){"use strict";var n=r(4376),o=r(3517),i=r(34),s=r(8227)("species"),c=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(o(e)&&(e===c||n(e.prototype))||i(e)&&null===(e=e[s]))&&(e=void 0)),void 0===e?c:e}},1469(t,e,r){"use strict";var n=r(7433);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},4428(t,e,r){"use strict";var n=r(8227)("iterator"),o=!1;try{var i=0,s={next:function(){return{done:!!i++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,function(){throw 2})}catch(t){}t.exports=function(t,e){try{if(!e&&!o)return!1}catch(t){return!1}var r=!1;try{var i={};i[n]=function(){return{next:function(){return{done:r=!0}}}},t(i)}catch(t){}return r}},2195(t,e,r){"use strict";var n=r(9504),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},6955(t,e,r){"use strict";var n=r(2140),o=r(4901),i=r(2195),s=r(8227)("toStringTag"),c=Object,a="Arguments"===i(function(){return arguments}());t.exports=n?i:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=c(t),s))?r:a?i(e):"Object"===(n=i(e))&&o(e.callee)?"Arguments":n}},7740(t,e,r){"use strict";var n=r(9297),o=r(5031),i=r(7347),s=r(4913);t.exports=function(t,e,r){for(var c=o(e),a=s.f,u=i.f,l=0;l<c.length;l++){var h=c[l];n(t,h)||r&&n(r,h)||a(t,h,u(e,h))}}},2211(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},2529(t){"use strict";t.exports=function(t,e){return{value:t,done:e}}},6699(t,e,r){"use strict";var n=r(3724),o=r(4913),i=r(6980);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},6980(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},4659(t,e,r){"use strict";var n=r(3724),o=r(4913),i=r(6980);t.exports=function(t,e,r){n?o.f(t,e,i(0,r)):t[e]=r}},2106(t,e,r){"use strict";var n=r(283),o=r(4913);t.exports=function(t,e,r){return r.get&&n(r.get,e,{getter:!0}),r.set&&n(r.set,e,{setter:!0}),o.f(t,e,r)}},6840(t,e,r){"use strict";var n=r(4901),o=r(4913),i=r(283),s=r(9433);t.exports=function(t,e,r,c){c||(c={});var a=c.enumerable,u=void 0!==c.name?c.name:e;if(n(r)&&i(r,u,c),c.global)a?t[e]=r:s(e,r);else{try{c.unsafe?t[e]&&(a=!0):delete t[e]}catch(t){}a?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!c.nonConfigurable,writable:!c.nonWritable})}return t}},6279(t,e,r){"use strict";var n=r(6840);t.exports=function(t,e,r){for(var o in e)n(t,o,e[o],r);return t}},9433(t,e,r){"use strict";var n=r(4576),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},3724(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},4055(t,e,r){"use strict";var n=r(4576),o=r(34),i=n.document,s=o(i)&&o(i.createElement);t.exports=function(t){return s?i.createElement(t):{}}},7400(t){"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},9296(t,e,r){"use strict";var n=r(4055)("span").classList,o=n&&n.constructor&&n.constructor.prototype;t.exports=o===Object.prototype?void 0:o},8727(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3709(t,e,r){"use strict";var n=r(2839).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},3763(t,e,r){"use strict";var n=r(2839);t.exports=/MSIE|Trident/.test(n)},4265(t,e,r){"use strict";var n=r(2839);t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},9544(t,e,r){"use strict";var n=r(2839);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},6193(t,e,r){"use strict";var n=r(4215);t.exports="NODE"===n},7860(t,e,r){"use strict";var n=r(2839);t.exports=/web0s(?!.*chrome)/i.test(n)},2839(t,e,r){"use strict";var n=r(4576).navigator,o=n&&n.userAgent;t.exports=o?String(o):""},9519(t,e,r){"use strict";var n,o,i=r(4576),s=r(2839),c=i.process,a=i.Deno,u=c&&c.versions||a&&a.version,l=u&&u.v8;l&&(o=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},3607(t,e,r){"use strict";var n=r(2839).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},4215(t,e,r){"use strict";var n=r(4576),o=r(2839),i=r(2195),s=function(t){return o.slice(0,t.length)===t};t.exports=s("Bun/")?"BUN":s("Cloudflare-Workers")?"CLOUDFLARE":s("Deno/")?"DENO":s("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===i(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},6518(t,e,r){"use strict";var n=r(4576),o=r(7347).f,i=r(6699),s=r(6840),c=r(9433),a=r(7740),u=r(2796);t.exports=function(t,e){var r,l,h,p,f,g=t.target,d=t.global,v=t.stat;if(r=d?n:v?n[g]||c(g,{}):n[g]&&n[g].prototype)for(l in e){if(p=e[l],h=t.dontCallGetSet?(f=o(r,l))&&f.value:r[l],!u(d?l:g+(v?".":"#")+l,t.forced)&&void 0!==h){if(typeof p==typeof h)continue;a(p,h)}(t.sham||h&&h.sham)&&i(p,"sham",!0),s(r,l,p,t)}}},9039(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},9228(t,e,r){"use strict";r(7495);var n=r(9565),o=r(6840),i=r(7323),s=r(9039),c=r(8227),a=r(6699),u=c("species"),l=RegExp.prototype;t.exports=function(t,e,r,h){var p=c(t),f=!s(function(){var e={};return e[p]=function(){return 7},7!==""[t](e)}),g=f&&!s(function(){var e=!1,r=/a/;if("split"===t){var n={};n[u]=function(){return r},(r={constructor:n,flags:""})[p]=/./[p]}return r.exec=function(){return e=!0,null},r[p](""),!e});if(!f||!g||r){var d=/./[p],v=e(p,""[t],function(t,e,r,o,s){var c=e.exec;return c===i||c===l.exec?f&&!s?{done:!0,value:n(d,e,r,o)}:{done:!0,value:n(t,r,e,o)}:{done:!1}});o(String.prototype,t,v[0]),o(l,p,v[1])}h&&a(l[p],"sham",!0)}},8745(t,e,r){"use strict";var n=r(616),o=Function.prototype,i=o.apply,s=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(i):function(){return s.apply(i,arguments)})},6080(t,e,r){"use strict";var n=r(7476),o=r(9306),i=r(616),s=n(n.bind);t.exports=function(t,e){return o(t),void 0===e?t:i?s(t,e):function(){return t.apply(e,arguments)}}},616(t,e,r){"use strict";var n=r(9039);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},9565(t,e,r){"use strict";var n=r(616),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},350(t,e,r){"use strict";var n=r(3724),o=r(9297),i=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,c=o(i,"name"),a=c&&"something"===function(){}.name,u=c&&(!n||n&&s(i,"name").configurable);t.exports={EXISTS:c,PROPER:a,CONFIGURABLE:u}},6706(t,e,r){"use strict";var n=r(9504),o=r(9306);t.exports=function(t,e,r){try{return n(o(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},7476(t,e,r){"use strict";var n=r(2195),o=r(9504);t.exports=function(t){if("Function"===n(t))return o(t)}},9504(t,e,r){"use strict";var n=r(616),o=Function.prototype,i=o.call,s=n&&o.bind.bind(i,i);t.exports=n?s:function(t){return function(){return i.apply(t,arguments)}}},7751(t,e,r){"use strict";var n=r(4576),o=r(4901);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},851(t,e,r){"use strict";var n=r(6955),o=r(5966),i=r(4117),s=r(6269),c=r(8227)("iterator");t.exports=function(t){if(!i(t))return o(t,c)||o(t,"@@iterator")||s[n(t)]}},81(t,e,r){"use strict";var n=r(9565),o=r(9306),i=r(8551),s=r(6823),c=r(851),a=TypeError;t.exports=function(t,e){var r=arguments.length<2?c(t):e;if(o(r))return i(n(r,t));throw new a(s(t)+" is not iterable")}},5966(t,e,r){"use strict";var n=r(9306),o=r(4117);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},2478(t,e,r){"use strict";var n=r(9504),o=r(8981),i=Math.floor,s=n("".charAt),c=n("".replace),a=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,r,n,h,p){var f=r+t.length,g=n.length,d=l;return void 0!==h&&(h=o(h),d=u),c(p,d,function(o,c){var u;switch(s(c,0)){case"$":return"$";case"&":return t;case"`":return a(e,0,r);case"'":return a(e,f);case"<":u=h[a(c,1,-1)];break;default:var l=+c;if(0===l)return o;if(l>g){var p=i(l/10);return 0===p?o:p<=g?void 0===n[p-1]?s(c,1):n[p-1]+s(c,1):o}u=n[l-1]}return void 0===u?"":u})}},4576(t){"use strict";var e=function(t){return t&&t.Math===Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||e("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297(t,e,r){"use strict";var n=r(9504),o=r(8981),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},421(t){"use strict";t.exports={}},3138(t){"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},397(t,e,r){"use strict";var n=r(7751);t.exports=n("document","documentElement")},5917(t,e,r){"use strict";var n=r(3724),o=r(9039),i=r(4055);t.exports=!n&&!o(function(){return 7!==Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},8490(t){"use strict";var e=Array,r=Math.abs,n=Math.pow,o=Math.floor,i=Math.log,s=Math.LN2;t.exports={pack:function(t,c,a){var u,l,h,p=e(a),f=8*a-c-1,g=(1<<f)-1,d=g>>1,v=23===c?n(2,-24)-n(2,-77):0,b=t<0||0===t&&1/t<0?1:0,y=0;for((t=r(t))!=t||t===1/0?(l=t!=t?1:0,u=g):(u=o(i(t)/s),t*(h=n(2,-u))<1&&(u--,h*=2),(t+=u+d>=1?v/h:v*n(2,1-d))*h>=2&&(u++,h/=2),u+d>=g?(l=0,u=g):u+d>=1?(l=(t*h-1)*n(2,c),u+=d):(l=t*n(2,d-1)*n(2,c),u=0));c>=8;)p[y++]=255&l,l/=256,c-=8;for(u=u<<c|l,f+=c;f>0;)p[y++]=255&u,u/=256,f-=8;return p[y-1]|=128*b,p},unpack:function(t,e){var r,o=t.length,i=8*o-e-1,s=(1<<i)-1,c=s>>1,a=i-7,u=o-1,l=t[u--],h=127&l;for(l>>=7;a>0;)h=256*h+t[u--],a-=8;for(r=h&(1<<-a)-1,h>>=-a,a+=e;a>0;)r=256*r+t[u--],a-=8;if(0===h)h=1-c;else{if(h===s)return r?NaN:l?-1/0:1/0;r+=n(2,e),h-=c}return(l?-1:1)*r*n(2,h-e)}}},7055(t,e,r){"use strict";var n=r(9504),o=r(9039),i=r(2195),s=Object,c=n("".split);t.exports=o(function(){return!s("z").propertyIsEnumerable(0)})?function(t){return"String"===i(t)?c(t,""):s(t)}:s},3167(t,e,r){"use strict";var n=r(4901),o=r(34),i=r(2967);t.exports=function(t,e,r){var s,c;return i&&n(s=e.constructor)&&s!==r&&o(c=s.prototype)&&c!==r.prototype&&i(t,c),t}},3706(t,e,r){"use strict";var n=r(9504),o=r(4901),i=r(7629),s=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return s(t)}),t.exports=i.inspectSource},1181(t,e,r){"use strict";var n,o,i,s=r(8622),c=r(4576),a=r(34),u=r(6699),l=r(9297),h=r(7629),p=r(6119),f=r(421),g="Object already initialized",d=c.TypeError,v=c.WeakMap;if(s||h.state){var b=h.state||(h.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,n=function(t,e){if(b.has(t))throw new d(g);return e.facade=t,b.set(t,e),e},o=function(t){return b.get(t)||{}},i=function(t){return b.has(t)}}else{var y=p("state");f[y]=!0,n=function(t,e){if(l(t,y))throw new d(g);return e.facade=t,u(t,y,e),e},o=function(t){return l(t,y)?t[y]:{}},i=function(t){return l(t,y)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!a(e)||(r=o(e)).type!==t)throw new d("Incompatible receiver, "+t+" required");return r}}}},4209(t,e,r){"use strict";var n=r(8227),o=r(6269),i=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(o.Array===t||s[i]===t)}},4376(t,e,r){"use strict";var n=r(2195);t.exports=Array.isArray||function(t){return"Array"===n(t)}},1108(t,e,r){"use strict";var n=r(6955);t.exports=function(t){var e=n(t);return"BigInt64Array"===e||"BigUint64Array"===e}},4901(t){"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},3517(t,e,r){"use strict";var n=r(9504),o=r(9039),i=r(4901),s=r(6955),c=r(7751),a=r(3706),u=function(){},l=c("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.test(u),g=function(t){if(!i(t))return!1;try{return l(u,[],t),!0}catch(t){return!1}},d=function(t){if(!i(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,a(t))}catch(t){return!0}};d.sham=!0,t.exports=!l||o(function(){var t;return g(g.call)||!g(Object)||!g(function(){t=!0})||t})?d:g},2796(t,e,r){"use strict";var n=r(9039),o=r(4901),i=/#|\.prototype\./,s=function(t,e){var r=a[c(t)];return r===l||r!==u&&(o(e)?n(e):!!e)},c=s.normalize=function(t){return String(t).replace(i,".").toLowerCase()},a=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";t.exports=s},2087(t,e,r){"use strict";var n=r(34),o=Math.floor;t.exports=Number.isInteger||function(t){return!n(t)&&isFinite(t)&&o(t)===t}},4117(t){"use strict";t.exports=function(t){return null==t}},34(t,e,r){"use strict";var n=r(4901);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},3925(t,e,r){"use strict";var n=r(34);t.exports=function(t){return n(t)||null===t}},6395(t){"use strict";t.exports=!1},757(t,e,r){"use strict";var n=r(7751),o=r(4901),i=r(1625),s=r(7040),c=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return o(e)&&i(e.prototype,c(t))}},2652(t,e,r){"use strict";var n=r(6080),o=r(9565),i=r(8551),s=r(6823),c=r(4209),a=r(6198),u=r(1625),l=r(81),h=r(851),p=r(9539),f=TypeError,g=function(t,e){this.stopped=t,this.result=e},d=g.prototype;t.exports=function(t,e,r){var v,b,y,_,m,w,S,E=r&&r.that,O=!(!r||!r.AS_ENTRIES),C=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),x=!(!r||!r.INTERRUPTED),k=n(e,E),P=function(t){return v&&p(v,"normal"),new g(!0,t)},I=function(t){return O?(i(t),x?k(t[0],t[1],P):k(t[0],t[1])):x?k(t,P):k(t)};if(C)v=t.iterator;else if(T)v=t;else{if(!(b=h(t)))throw new f(s(t)+" is not iterable");if(c(b)){for(y=0,_=a(t);_>y;y++)if((m=I(t[y]))&&u(d,m))return m;return new g(!1)}v=l(t,b)}for(w=C?t.next:v.next;!(S=o(w,v)).done;){try{m=I(S.value)}catch(t){p(v,"throw",t)}if("object"==typeof m&&m&&u(d,m))return m}return new g(!1)}},9539(t,e,r){"use strict";var n=r(9565),o=r(8551),i=r(5966);t.exports=function(t,e,r){var s,c;o(t);try{if(!(s=i(t,"return"))){if("throw"===e)throw r;return r}s=n(s,t)}catch(t){c=!0,s=t}if("throw"===e)throw r;if(c)throw s;return o(s),r}},3994(t,e,r){"use strict";var n=r(7657).IteratorPrototype,o=r(2360),i=r(6980),s=r(687),c=r(6269),a=function(){return this};t.exports=function(t,e,r,u){var l=e+" Iterator";return t.prototype=o(n,{next:i(+!u,r)}),s(t,l,!1,!0),c[l]=a,t}},1088(t,e,r){"use strict";var n=r(6518),o=r(9565),i=r(6395),s=r(350),c=r(4901),a=r(3994),u=r(2787),l=r(2967),h=r(687),p=r(6699),f=r(6840),g=r(8227),d=r(6269),v=r(7657),b=s.PROPER,y=s.CONFIGURABLE,_=v.IteratorPrototype,m=v.BUGGY_SAFARI_ITERATORS,w=g("iterator"),S="keys",E="values",O="entries",C=function(){return this};t.exports=function(t,e,r,s,g,v,T){a(r,e,s);var x,k,P,I=function(t){if(t===g&&M)return M;if(!m&&t&&t in A)return A[t];switch(t){case S:case E:case O:return function(){return new r(this,t)}}return function(){return new r(this)}},R=e+" Iterator",j=!1,A=t.prototype,D=A[w]||A["@@iterator"]||g&&A[g],M=!m&&D||I(g),L="Array"===e&&A.entries||D;if(L&&(x=u(L.call(new t)))!==Object.prototype&&x.next&&(i||u(x)===_||(l?l(x,_):c(x[w])||f(x,w,C)),h(x,R,!0,!0),i&&(d[R]=C)),b&&g===E&&D&&D.name!==E&&(!i&&y?p(A,"name",E):(j=!0,M=function(){return o(D,this)})),g)if(k={values:I(E),keys:v?M:I(S),entries:I(O)},T)for(P in k)(m||j||!(P in A))&&f(A,P,k[P]);else n({target:e,proto:!0,forced:m||j},k);return i&&!T||A[w]===M||f(A,w,M,{name:g}),d[e]=M,k}},7657(t,e,r){"use strict";var n,o,i,s=r(9039),c=r(4901),a=r(34),u=r(2360),l=r(2787),h=r(6840),p=r(8227),f=r(6395),g=p("iterator"),d=!1;[].keys&&("next"in(i=[].keys())?(o=l(l(i)))!==Object.prototype&&(n=o):d=!0),!a(n)||s(function(){var t={};return n[g].call(t)!==t})?n={}:f&&(n=u(n)),c(n[g])||h(n,g,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},6269(t){"use strict";t.exports={}},6198(t,e,r){"use strict";var n=r(8014);t.exports=function(t){return n(t.length)}},283(t,e,r){"use strict";var n=r(9504),o=r(9039),i=r(4901),s=r(9297),c=r(3724),a=r(350).CONFIGURABLE,u=r(3706),l=r(1181),h=l.enforce,p=l.get,f=String,g=Object.defineProperty,d=n("".slice),v=n("".replace),b=n([].join),y=c&&!o(function(){return 8!==g(function(){},"length",{value:8}).length}),_=String(String).split("String"),m=t.exports=function(t,e,r){"Symbol("===d(f(e),0,7)&&(e="["+v(f(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!s(t,"name")||a&&t.name!==e)&&(c?g(t,"name",{value:e,configurable:!0}):t.name=e),y&&r&&s(r,"arity")&&t.length!==r.arity&&g(t,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?c&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=h(t);return s(n,"source")||(n.source=b(_,"string"==typeof e?e:"")),t};Function.prototype.toString=m(function(){return i(this)&&p(this).source||u(this)},"toString")},3164(t,e,r){"use strict";var n=r(7782),o=r(3602),i=Math.abs;t.exports=function(t,e,r,s){var c=+t,a=i(c),u=n(c);if(a<s)return u*o(a/s/e)*s*e;var l=(1+e/2220446049250313e-31)*a,h=l-(l-a);return h>r||h!=h?u*(1/0):u*h}},5617(t,e,r){"use strict";var n=r(3164);t.exports=Math.fround||function(t){return n(t,1.1920928955078125e-7,34028234663852886e22,11754943508222875e-54)}},3602(t){"use strict";var e=4503599627370496;t.exports=function(t){return t+e-e}},7782(t){"use strict";t.exports=Math.sign||function(t){var e=+t;return 0===e||e!=e?e:e<0?-1:1}},741(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},1955(t,e,r){"use strict";var n,o,i,s,c,a=r(4576),u=r(3389),l=r(6080),h=r(9225).set,p=r(8265),f=r(9544),g=r(4265),d=r(7860),v=r(6193),b=a.MutationObserver||a.WebKitMutationObserver,y=a.document,_=a.process,m=a.Promise,w=u("queueMicrotask");if(!w){var S=new p,E=function(){var t,e;for(v&&(t=_.domain)&&t.exit();e=S.get();)try{e()}catch(t){throw S.head&&n(),t}t&&t.enter()};f||v||d||!b||!y?!g&&m&&m.resolve?((s=m.resolve(void 0)).constructor=m,c=l(s.then,s),n=function(){c(E)}):v?n=function(){_.nextTick(E)}:(h=l(h,a),n=function(){h(E)}):(o=!0,i=y.createTextNode(""),new b(E).observe(i,{characterData:!0}),n=function(){i.data=o=!o}),w=function(t){S.head||n(),S.add(t)}}t.exports=w},6043(t,e,r){"use strict";var n=r(9306),o=TypeError,i=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw new o("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new i(t)}},2360(t,e,r){"use strict";var n,o=r(8551),i=r(6801),s=r(8727),c=r(421),a=r(397),u=r(4055),l=r(6119),h="prototype",p="script",f=l("IE_PROTO"),g=function(){},d=function(t){return"<"+p+">"+t+"</"+p+">"},v=function(t){t.write(d("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;b="undefined"!=typeof document?document.domain&&n?v(n):(e=u("iframe"),r="java"+p+":",e.style.display="none",a.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(d("document.F=Object")),t.close(),t.F):v(n);for(var o=s.length;o--;)delete b[h][s[o]];return b()};c[f]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(g[h]=o(t),r=new g,g[h]=null,r[f]=t):r=b(),void 0===e?r:i.f(r,e)}},6801(t,e,r){"use strict";var n=r(3724),o=r(8686),i=r(4913),s=r(8551),c=r(5397),a=r(1072);e.f=n&&!o?Object.defineProperties:function(t,e){s(t);for(var r,n=c(e),o=a(e),u=o.length,l=0;u>l;)i.f(t,r=o[l++],n[r]);return t}},4913(t,e,r){"use strict";var n=r(3724),o=r(5917),i=r(8686),s=r(8551),c=r(6969),a=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",f="writable";e.f=n?i?function(t,e,r){if(s(t),e=c(e),s(r),"function"==typeof t&&"prototype"===e&&"value"in r&&f in r&&!r[f]){var n=l(t,e);n&&n[f]&&(t[e]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:h in r?r[h]:n[h],writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(s(t),e=c(e),s(r),o)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new a("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7347(t,e,r){"use strict";var n=r(3724),o=r(9565),i=r(8773),s=r(6980),c=r(5397),a=r(6969),u=r(9297),l=r(5917),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=c(t),e=a(e),l)try{return h(t,e)}catch(t){}if(u(t,e))return s(!o(i.f,t,e),t[e])}},8480(t,e,r){"use strict";var n=r(1828),o=r(8727).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},3717(t,e){"use strict";e.f=Object.getOwnPropertySymbols},2787(t,e,r){"use strict";var n=r(9297),o=r(4901),i=r(8981),s=r(6119),c=r(2211),a=s("IE_PROTO"),u=Object,l=u.prototype;t.exports=c?u.getPrototypeOf:function(t){var e=i(t);if(n(e,a))return e[a];var r=e.constructor;return o(r)&&e instanceof r?r.prototype:e instanceof u?l:null}},1625(t,e,r){"use strict";var n=r(9504);t.exports=n({}.isPrototypeOf)},1828(t,e,r){"use strict";var n=r(9504),o=r(9297),i=r(5397),s=r(9617).indexOf,c=r(421),a=n([].push);t.exports=function(t,e){var r,n=i(t),u=0,l=[];for(r in n)!o(c,r)&&o(n,r)&&a(l,r);for(;e.length>u;)o(n,r=e[u++])&&(~s(l,r)||a(l,r));return l}},1072(t,e,r){"use strict";var n=r(1828),o=r(8727);t.exports=Object.keys||function(t){return n(t,o)}},8773(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2967(t,e,r){"use strict";var n=r(6706),o=r(34),i=r(7750),s=r(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return i(r),s(n),o(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},4270(t,e,r){"use strict";var n=r(9565),o=r(4901),i=r(34),s=TypeError;t.exports=function(t,e){var r,c;if("string"===e&&o(r=t.toString)&&!i(c=n(r,t)))return c;if(o(r=t.valueOf)&&!i(c=n(r,t)))return c;if("string"!==e&&o(r=t.toString)&&!i(c=n(r,t)))return c;throw new s("Can't convert object to primitive value")}},5031(t,e,r){"use strict";var n=r(7751),o=r(9504),i=r(8480),s=r(3717),c=r(8551),a=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(c(t)),r=s.f;return r?a(e,r(t)):e}},9167(t,e,r){"use strict";var n=r(4576);t.exports=n},1103(t){"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},916(t,e,r){"use strict";var n=r(4576),o=r(550),i=r(4901),s=r(2796),c=r(3706),a=r(8227),u=r(4215),l=r(6395),h=r(9519),p=o&&o.prototype,f=a("species"),g=!1,d=i(n.PromiseRejectionEvent),v=s("Promise",function(){var t=c(o),e=t!==String(o);if(!e&&66===h)return!0;if(l&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(t)){var r=new o(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((r.constructor={})[f]=n,!(g=r.then(function(){})instanceof n))return!0}return!(e||"BROWSER"!==u&&"DENO"!==u||d)});t.exports={CONSTRUCTOR:v,REJECTION_EVENT:d,SUBCLASSING:g}},550(t,e,r){"use strict";var n=r(4576);t.exports=n.Promise},3438(t,e,r){"use strict";var n=r(8551),o=r(34),i=r(6043);t.exports=function(t,e){if(n(t),o(e)&&e.constructor===t)return e;var r=i.f(t);return(0,r.resolve)(e),r.promise}},537(t,e,r){"use strict";var n=r(550),o=r(4428),i=r(916).CONSTRUCTOR;t.exports=i||!o(function(t){n.all(t).then(void 0,function(){})})},8265(t){"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},6682(t,e,r){"use strict";var n=r(9565),o=r(8551),i=r(4901),s=r(2195),c=r(7323),a=TypeError;t.exports=function(t,e){var r=t.exec;if(i(r)){var u=n(r,t,e);return null!==u&&o(u),u}if("RegExp"===s(t))return n(c,t,e);throw new a("RegExp#exec called on incompatible receiver")}},7323(t,e,r){"use strict";var n,o,i=r(9565),s=r(9504),c=r(655),a=r(7979),u=r(8429),l=r(5745),h=r(2360),p=r(1181).get,f=r(3635),g=r(8814),d=l("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,b=v,y=s("".charAt),_=s("".indexOf),m=s("".replace),w=s("".slice),S=(o=/b*/g,i(v,n=/a/,"a"),i(v,o,"a"),0!==n.lastIndex||0!==o.lastIndex),E=u.BROKEN_CARET,O=void 0!==/()??/.exec("")[1];(S||O||E||f||g)&&(b=function(t){var e,r,n,o,s,u,l,f=this,g=p(f),C=c(t),T=g.raw;if(T)return T.lastIndex=f.lastIndex,e=i(b,T,C),f.lastIndex=T.lastIndex,e;var x=g.groups,k=E&&f.sticky,P=i(a,f),I=f.source,R=0,j=C;if(k&&(P=m(P,"y",""),-1===_(P,"g")&&(P+="g"),j=w(C,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==y(C,f.lastIndex-1))&&(I="(?: "+I+")",j=" "+j,R++),r=new RegExp("^(?:"+I+")",P)),O&&(r=new RegExp("^"+I+"$(?!\\s)",P)),S&&(n=f.lastIndex),o=i(v,k?r:f,j),k?o?(o.input=w(o.input,R),o[0]=w(o[0],R),o.index=f.lastIndex,f.lastIndex+=o[0].length):f.lastIndex=0:S&&o&&(f.lastIndex=f.global?o.index+o[0].length:n),O&&o&&o.length>1&&i(d,o[0],r,function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(o[s]=void 0)}),o&&x)for(o.groups=u=h(null),s=0;s<x.length;s++)u[(l=x[s])[0]]=o[l[1]];return o}),t.exports=b},5213(t,e,r){"use strict";var n=r(4576),o=r(9039),i=n.RegExp,s=!o(function(){var t=!0;try{i(".","d")}catch(e){t=!1}var e={},r="",n=t?"dgimsy":"gimsy",o=function(t,n){Object.defineProperty(e,t,{get:function(){return r+=n,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var c in t&&(s.hasIndices="d"),s)o(c,s[c]);return Object.getOwnPropertyDescriptor(i.prototype,"flags").get.call(e)!==n||r!==n});t.exports={correct:s}},7979(t,e,r){"use strict";var n=r(8551);t.exports=function(){var t=n(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},1034(t,e,r){"use strict";var n=r(9565),o=r(9297),i=r(1625),s=r(5213),c=r(7979),a=RegExp.prototype;t.exports=s.correct?function(t){return t.flags}:function(t){return s.correct||!i(a,t)||o(t,"flags")?t.flags:n(c,t)}},8429(t,e,r){"use strict";var n=r(9039),o=r(4576).RegExp,i=n(function(){var t=o("a","y");return t.lastIndex=2,null!==t.exec("abcd")}),s=i||n(function(){return!o("a","y").sticky}),c=i||n(function(){var t=o("^r","gy");return t.lastIndex=2,null!==t.exec("str")});t.exports={BROKEN_CARET:c,MISSED_STICKY:s,UNSUPPORTED_Y:i}},3635(t,e,r){"use strict";var n=r(9039),o=r(4576).RegExp;t.exports=n(function(){var t=o(".","s");return!(t.dotAll&&t.test("\n")&&"s"===t.flags)})},8814(t,e,r){"use strict";var n=r(9039),o=r(4576).RegExp;t.exports=n(function(){var t=o("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})},7750(t,e,r){"use strict";var n=r(4117),o=TypeError;t.exports=function(t){if(n(t))throw new o("Can't call method on "+t);return t}},3389(t,e,r){"use strict";var n=r(4576),o=r(3724),i=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!o)return n[t];var e=i(n,t);return e&&e.value}},7633(t,e,r){"use strict";var n=r(7751),o=r(2106),i=r(8227),s=r(3724),c=i("species");t.exports=function(t){var e=n(t);s&&e&&!e[c]&&o(e,c,{configurable:!0,get:function(){return this}})}},687(t,e,r){"use strict";var n=r(4913).f,o=r(9297),i=r(8227)("toStringTag");t.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!o(t,i)&&n(t,i,{configurable:!0,value:e})}},6119(t,e,r){"use strict";var n=r(5745),o=r(3392),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},7629(t,e,r){"use strict";var n=r(6395),o=r(4576),i=r(9433),s="__core-js_shared__",c=t.exports=o[s]||i(s,{});(c.versions||(c.versions=[])).push({version:"3.48.0",mode:n?"pure":"global",copyright:"© 2013–2025 Denis Pushkarev (zloirock.ru), 2025–2026 CoreJS Company (core-js.io). All rights reserved.",license:"https://github.com/zloirock/core-js/blob/v3.48.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745(t,e,r){"use strict";var n=r(7629);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},2293(t,e,r){"use strict";var n=r(8551),o=r(5548),i=r(4117),s=r(8227)("species");t.exports=function(t,e){var r,c=n(t).constructor;return void 0===c||i(r=n(c)[s])?e:o(r)}},8183(t,e,r){"use strict";var n=r(9504),o=r(1291),i=r(655),s=r(7750),c=n("".charAt),a=n("".charCodeAt),u=n("".slice),l=function(t){return function(e,r){var n,l,h=i(s(e)),p=o(r),f=h.length;return p<0||p>=f?t?"":void 0:(n=a(h,p))<55296||n>56319||p+1===f||(l=a(h,p+1))<56320||l>57343?t?c(h,p):n:t?u(h,p,p+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},4495(t,e,r){"use strict";var n=r(9519),o=r(9039),i=r(4576).String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol("symbol detection");return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},9225(t,e,r){"use strict";var n,o,i,s,c=r(4576),a=r(8745),u=r(6080),l=r(4901),h=r(9297),p=r(9039),f=r(397),g=r(7680),d=r(4055),v=r(2812),b=r(9544),y=r(6193),_=c.setImmediate,m=c.clearImmediate,w=c.process,S=c.Dispatch,E=c.Function,O=c.MessageChannel,C=c.String,T=0,x={},k="onreadystatechange";p(function(){n=c.location});var P=function(t){if(h(x,t)){var e=x[t];delete x[t],e()}},I=function(t){return function(){P(t)}},R=function(t){P(t.data)},j=function(t){c.postMessage(C(t),n.protocol+"//"+n.host)};_&&m||(_=function(t){v(arguments.length,1);var e=l(t)?t:E(t),r=g(arguments,1);return x[++T]=function(){a(e,void 0,r)},o(T),T},m=function(t){delete x[t]},y?o=function(t){w.nextTick(I(t))}:S&&S.now?o=function(t){S.now(I(t))}:O&&!b?(s=(i=new O).port2,i.port1.onmessage=R,o=u(s.postMessage,s)):c.addEventListener&&l(c.postMessage)&&!c.importScripts&&n&&"file:"!==n.protocol&&!p(j)?(o=j,c.addEventListener("message",R,!1)):o=k in d("script")?function(t){f.appendChild(d("script"))[k]=function(){f.removeChild(this),P(t)}}:function(t){setTimeout(I(t),0)}),t.exports={set:_,clear:m}},5610(t,e,r){"use strict";var n=r(1291),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},5854(t,e,r){"use strict";var n=r(2777),o=TypeError;t.exports=function(t){var e=n(t,"number");if("number"==typeof e)throw new o("Can't convert number to bigint");return BigInt(e)}},7696(t,e,r){"use strict";var n=r(1291),o=r(8014),i=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=o(e);if(e!==r)throw new i("Wrong length or index");return r}},5397(t,e,r){"use strict";var n=r(7055),o=r(7750);t.exports=function(t){return n(o(t))}},1291(t,e,r){"use strict";var n=r(741);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},8014(t,e,r){"use strict";var n=r(1291),o=Math.min;t.exports=function(t){var e=n(t);return e>0?o(e,9007199254740991):0}},8981(t,e,r){"use strict";var n=r(7750),o=Object;t.exports=function(t){return o(n(t))}},8229(t,e,r){"use strict";var n=r(9590),o=RangeError;t.exports=function(t,e){var r=n(t);if(r%e)throw new o("Wrong offset");return r}},9590(t,e,r){"use strict";var n=r(1291),o=RangeError;t.exports=function(t){var e=n(t);if(e<0)throw new o("The argument can't be less than 0");return e}},2777(t,e,r){"use strict";var n=r(9565),o=r(34),i=r(757),s=r(5966),c=r(4270),a=r(8227),u=TypeError,l=a("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,a=s(t,l);if(a){if(void 0===e&&(e="default"),r=n(a,t,e),!o(r)||i(r))return r;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),c(t,e)}},6969(t,e,r){"use strict";var n=r(2777),o=r(757);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},2140(t,e,r){"use strict";var n={};n[r(8227)("toStringTag")]="z",t.exports="[object z]"===String(n)},655(t,e,r){"use strict";var n=r(6955),o=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},8319(t){"use strict";var e=Math.round;t.exports=function(t){var r=e(t);return r<0?0:r>255?255:255&r}},6823(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},5823(t,e,r){"use strict";var n=r(6518),o=r(4576),i=r(9565),s=r(3724),c=r(2805),a=r(4644),u=r(6346),l=r(679),h=r(6980),p=r(6699),f=r(2087),g=r(8014),d=r(7696),v=r(8229),b=r(8319),y=r(6969),_=r(9297),m=r(6955),w=r(34),S=r(757),E=r(2360),O=r(1625),C=r(2967),T=r(8480).f,x=r(3251),k=r(9213).forEach,P=r(7633),I=r(2106),R=r(4913),j=r(7347),A=r(5370),D=r(1181),M=r(3167),L=D.get,N=D.set,F=D.enforce,U=R.f,H=j.f,B=o.RangeError,W=u.ArrayBuffer,q=W.prototype,V=u.DataView,G=a.NATIVE_ARRAY_BUFFER_VIEWS,z=a.TYPED_ARRAY_TAG,K=a.TypedArray,$=a.TypedArrayPrototype,Y=a.isTypedArray,J="BYTES_PER_ELEMENT",X="Wrong length",Q=function(t,e){I(t,e,{configurable:!0,get:function(){return L(this)[e]}})},Z=function(t){var e;return O(q,t)||"ArrayBuffer"===(e=m(t))||"SharedArrayBuffer"===e},tt=function(t,e){return Y(t)&&!S(e)&&e in t&&f(+e)&&e>=0},et=function(t,e){return e=y(e),tt(t,e)?h(2,t[e]):H(t,e)},rt=function(t,e,r){return e=y(e),!(tt(t,e)&&w(r)&&_(r,"value"))||_(r,"get")||_(r,"set")||r.configurable||_(r,"writable")&&!r.writable||_(r,"enumerable")&&!r.enumerable?U(t,e,r):(t[e]=r.value,t)};s?(G||(j.f=et,R.f=rt,Q($,"buffer"),Q($,"byteOffset"),Q($,"byteLength"),Q($,"length")),n({target:"Object",stat:!0,forced:!G},{getOwnPropertyDescriptor:et,defineProperty:rt}),t.exports=function(t,e,r){var s=t.match(/\d+/)[0]/8,a=t+(r?"Clamped":"")+"Array",u="get"+t,h="set"+t,f=o[a],y=f,_=y&&y.prototype,m={},S=function(t,e){U(t,e,{get:function(){return function(t,e){var r=L(t);return r.view[u](e*s+r.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var o=L(t);o.view[h](e*s+o.byteOffset,r?b(n):n,!0)}(this,e,t)},enumerable:!0})};G?c&&(y=e(function(t,e,r,n){return l(t,_),M(w(e)?Z(e)?void 0!==n?new f(e,v(r,s),n):void 0!==r?new f(e,v(r,s)):new f(e):Y(e)?A(y,e):i(x,y,e):new f(d(e)),t,y)}),C&&C(y,K),k(T(f),function(t){t in y||p(y,t,f[t])}),y.prototype=_):(y=e(function(t,e,r,n){l(t,_);var o,c,a,u=0,h=0;if(w(e)){if(!Z(e))return Y(e)?A(y,e):i(x,y,e);o=e,h=v(r,s);var p=e.byteLength;if(void 0===n){if(p%s)throw new B(X);if((c=p-h)<0)throw new B(X)}else if((c=g(n)*s)+h>p)throw new B(X);a=c/s}else a=d(e),o=new W(c=a*s);for(N(t,{buffer:o,byteOffset:h,byteLength:c,length:a,view:new V(o)});u<a;)S(t,u++)}),C&&C(y,K),_=y.prototype=E($)),_.constructor!==y&&p(_,"constructor",y),F(_).TypedArrayConstructor=y,z&&p(_,z,a);var O=y!==f;m[a]=y,n({global:!0,constructor:!0,forced:O,sham:!G},m),J in y||p(y,J,s),J in _||p(_,J,s),P(a)}):t.exports=function(){}},2805(t,e,r){"use strict";var n=r(4576),o=r(9039),i=r(4428),s=r(4644).NATIVE_ARRAY_BUFFER_VIEWS,c=n.ArrayBuffer,a=n.Int8Array;t.exports=!s||!o(function(){a(1)})||!o(function(){new a(-1)})||!i(function(t){new a,new a(null),new a(1.5),new a(t)},!0)||o(function(){return 1!==new a(new c(2),1,void 0).length})},3251(t,e,r){"use strict";var n=r(6080),o=r(9565),i=r(5548),s=r(8981),c=r(6198),a=r(81),u=r(851),l=r(4209),h=r(1108),p=r(4644).aTypedArrayConstructor,f=r(5854);t.exports=function(t){var e,r,g,d,v,b,y,_,m=i(this),w=s(t),S=arguments.length,E=S>1?arguments[1]:void 0,O=void 0!==E,C=u(w);if(C&&!l(C))for(_=(y=a(w,C)).next,w=[];!(b=o(_,y)).done;)w.push(b.value);for(O&&S>2&&(E=n(E,arguments[2])),r=c(w),g=new(p(m))(r),d=h(g),e=0;r>e;e++)v=O?E(w[e],e):w[e],g[e]=d?f(v):+v;return g}},3392(t,e,r){"use strict";var n=r(9504),o=0,i=Math.random(),s=n(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++o+i,36)}},7040(t,e,r){"use strict";var n=r(4495);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686(t,e,r){"use strict";var n=r(3724),o=r(9039);t.exports=n&&o(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},2812(t){"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},8622(t,e,r){"use strict";var n=r(4576),o=r(4901),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},8227(t,e,r){"use strict";var n=r(4576),o=r(5745),i=r(9297),s=r(3392),c=r(4495),a=r(7040),u=n.Symbol,l=o("wks"),h=a?u.for||u:u&&u.withoutSetter||s;t.exports=function(t){return i(l,t)||(l[t]=c&&i(u,t)?u[t]:h("Symbol."+t)),l[t]}},4743(t,e,r){"use strict";var n=r(6518),o=r(4576),i=r(6346),s=r(7633),c="ArrayBuffer",a=i[c];n({global:!0,constructor:!0,forced:o[c]!==a},{ArrayBuffer:a}),s(c)},1745(t,e,r){"use strict";var n=r(6518),o=r(7476),i=r(9039),s=r(6346),c=r(8551),a=r(5610),u=r(8014),l=s.ArrayBuffer,h=s.DataView,p=h.prototype,f=o(l.prototype.slice),g=o(p.getUint8),d=o(p.setUint8);n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i(function(){return!new l(2).slice(1,void 0).byteLength})},{slice:function(t,e){if(f&&void 0===e)return f(c(this),t);for(var r=c(this).byteLength,n=a(t,r),o=a(void 0===e?r:e,r),i=new l(u(o-n)),s=new h(this),p=new h(i),v=0;n<o;)d(p,v++,g(s,n++));return i}})},3792(t,e,r){"use strict";var n=r(5397),o=r(6469),i=r(6269),s=r(1181),c=r(4913).f,a=r(1088),u=r(2529),l=r(6395),h=r(3724),p="Array Iterator",f=s.set,g=s.getterFor(p);t.exports=a(Array,"Array",function(t,e){f(this,{type:p,target:n(t),index:0,kind:e})},function(){var t=g(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,u(void 0,!0);switch(t.kind){case"keys":return u(r,!1);case"values":return u(e[r],!1)}return u([r,e[r]],!1)},"values");var d=i.Arguments=i.Array;if(o("keys"),o("values"),o("entries"),!l&&h&&"values"!==d.name)try{c(d,"name",{value:"values"})}catch(t){}},2712(t,e,r){"use strict";var n=r(6518),o=r(926).left,i=r(4598),s=r(9519);n({target:"Array",proto:!0,forced:!r(6193)&&s>79&&s<83||!i("reduce")},{reduce:function(t){var e=arguments.length;return o(this,t,e,e>1?arguments[1]:void 0)}})},4490(t,e,r){"use strict";var n=r(6518),o=r(9504),i=r(4376),s=o([].reverse),c=[1,2];n({target:"Array",proto:!0,forced:String(c)===String(c.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),s(this)}})},5081(t,e,r){"use strict";var n=r(6518),o=r(4576);n({global:!0,forced:o.globalThis!==o},{globalThis:o})},6499(t,e,r){"use strict";var n=r(6518),o=r(9565),i=r(9306),s=r(6043),c=r(1103),a=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{all:function(t){var e=this,r=s.f(e),n=r.resolve,u=r.reject,l=c(function(){var r=i(e.resolve),s=[],c=0,l=1;a(t,function(t){var i=c++,a=!1;l++,o(r,e,t).then(function(t){a||(a=!0,s[i]=t,--l||n(s))},u)}),--l||n(s)});return l.error&&u(l.value),r.promise}})},2003(t,e,r){"use strict";var n=r(6518),o=r(6395),i=r(916).CONSTRUCTOR,s=r(550),c=r(7751),a=r(4901),u=r(6840),l=s&&s.prototype;if(n({target:"Promise",proto:!0,forced:i,real:!0},{catch:function(t){return this.then(void 0,t)}}),!o&&a(s)){var h=c("Promise").prototype.catch;l.catch!==h&&u(l,"catch",h,{unsafe:!0})}},436(t,e,r){"use strict";var n,o,i,s,c=r(6518),a=r(6395),u=r(6193),l=r(4576),h=r(9167),p=r(9565),f=r(6840),g=r(2967),d=r(687),v=r(7633),b=r(9306),y=r(4901),_=r(34),m=r(679),w=r(2293),S=r(9225).set,E=r(1955),O=r(3138),C=r(1103),T=r(8265),x=r(1181),k=r(550),P=r(916),I=r(6043),R="Promise",j=P.CONSTRUCTOR,A=P.REJECTION_EVENT,D=P.SUBCLASSING,M=x.getterFor(R),L=x.set,N=k&&k.prototype,F=k,U=N,H=l.TypeError,B=l.document,W=l.process,q=I.f,V=q,G=!!(B&&B.createEvent&&l.dispatchEvent),z="unhandledrejection",K=function(t){var e;return!(!_(t)||!y(e=t.then))&&e},$=function(t,e){var r,n,o,i=e.value,s=1===e.state,c=s?t.ok:t.fail,a=t.resolve,u=t.reject,l=t.domain;try{c?(s||(2===e.rejection&&Z(e),e.rejection=1),!0===c?r=i:(l&&l.enter(),r=c(i),l&&(l.exit(),o=!0)),r===t.promise?u(new H("Promise-chain cycle")):(n=K(r))?p(n,r,a,u):a(r)):u(i)}catch(t){l&&!o&&l.exit(),u(t)}},Y=function(t,e){t.notified||(t.notified=!0,E(function(){for(var r,n=t.reactions;r=n.get();)$(r,t);t.notified=!1,e&&!t.rejection&&X(t)}))},J=function(t,e,r){var n,o;G?((n=B.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),l.dispatchEvent(n)):n={promise:e,reason:r},!A&&(o=l["on"+t])?o(n):t===z&&O("Unhandled promise rejection",r)},X=function(t){p(S,l,function(){var e,r=t.facade,n=t.value;if(Q(t)&&(e=C(function(){u?W.emit("unhandledRejection",n,r):J(z,r,n)}),t.rejection=u||Q(t)?2:1,e.error))throw e.value})},Q=function(t){return 1!==t.rejection&&!t.parent},Z=function(t){p(S,l,function(){var e=t.facade;u?W.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)})},tt=function(t,e,r){return function(n){t(e,n,r)}},et=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,Y(t,!0))},rt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new H("Promise can't be resolved itself");var n=K(e);n?E(function(){var r={done:!1};try{p(n,e,tt(rt,r,t),tt(et,r,t))}catch(e){et(r,e,t)}}):(t.value=e,t.state=1,Y(t,!1))}catch(e){et({done:!1},e,t)}}};if(j&&(U=(F=function(t){m(this,U),b(t),p(n,this);var e=M(this);try{t(tt(rt,e),tt(et,e))}catch(t){et(e,t)}}).prototype,(n=function(t){L(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new T,rejection:!1,state:0,value:null})}).prototype=f(U,"then",function(t,e){var r=M(this),n=q(w(this,F));return r.parent=!0,n.ok=!y(t)||t,n.fail=y(e)&&e,n.domain=u?W.domain:void 0,0===r.state?r.reactions.add(n):E(function(){$(n,r)}),n.promise}),o=function(){var t=new n,e=M(t);this.promise=t,this.resolve=tt(rt,e),this.reject=tt(et,e)},I.f=q=function(t){return t===F||t===i?new o(t):V(t)},!a&&y(k)&&N!==Object.prototype)){s=N.then,D||f(N,"then",function(t,e){var r=this;return new F(function(t,e){p(s,r,t,e)}).then(t,e)},{unsafe:!0});try{delete N.constructor}catch(t){}g&&g(N,U)}c({global:!0,constructor:!0,wrap:!0,forced:j},{Promise:F}),i=h.Promise,d(F,R,!1,!0),v(R)},9391(t,e,r){"use strict";var n=r(6518),o=r(6395),i=r(550),s=r(9039),c=r(7751),a=r(4901),u=r(2293),l=r(3438),h=r(6840),p=i&&i.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!i&&s(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=u(this,c("Promise")),r=a(t);return this.then(r?function(r){return l(e,t()).then(function(){return r})}:t,r?function(r){return l(e,t()).then(function(){throw r})}:t)}}),!o&&a(i)){var f=c("Promise").prototype.finally;p.finally!==f&&h(p,"finally",f,{unsafe:!0})}},3362(t,e,r){"use strict";r(436),r(6499),r(2003),r(7743),r(1481),r(280)},7743(t,e,r){"use strict";var n=r(6518),o=r(9565),i=r(9306),s=r(6043),c=r(1103),a=r(2652);n({target:"Promise",stat:!0,forced:r(537)},{race:function(t){var e=this,r=s.f(e),n=r.reject,u=c(function(){var s=i(e.resolve);a(t,function(t){o(s,e,t).then(r.resolve,n)})});return u.error&&n(u.value),r.promise}})},1481(t,e,r){"use strict";var n=r(6518),o=r(6043);n({target:"Promise",stat:!0,forced:r(916).CONSTRUCTOR},{reject:function(t){var e=o.f(this);return(0,e.reject)(t),e.promise}})},280(t,e,r){"use strict";var n=r(6518),o=r(7751),i=r(6395),s=r(550),c=r(916).CONSTRUCTOR,a=r(3438),u=o("Promise"),l=i&&!c;n({target:"Promise",stat:!0,forced:i||c},{resolve:function(t){return a(l&&this===u?s:this,t)}})},7495(t,e,r){"use strict";var n=r(6518),o=r(7323);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},8781(t,e,r){"use strict";var n=r(350).PROPER,o=r(6840),i=r(8551),s=r(655),c=r(9039),a=r(1034),u="toString",l=RegExp.prototype,h=l[u],p=c(function(){return"/a/b"!==h.call({source:"a",flags:"b"})}),f=n&&h.name!==u;(p||f)&&o(l,u,function(){var t=i(this);return"/"+s(t.source)+"/"+s(a(t))},{unsafe:!0})},1761(t,e,r){"use strict";var n=r(9565),o=r(9504),i=r(9228),s=r(8551),c=r(34),a=r(8014),u=r(655),l=r(7750),h=r(5966),p=r(7829),f=r(1034),g=r(6682),d=o("".indexOf);i("match",function(t,e,r){return[function(e){var r=l(this),o=c(e)?h(e,t):void 0;return o?n(o,e,r):new RegExp(e)[t](u(r))},function(t){var n=s(this),o=u(t),i=r(e,n,o);if(i.done)return i.value;var c=u(f(n));if(-1===d(c,"g"))return g(n,o);var l=-1!==d(c,"u");n.lastIndex=0;for(var h,v=[],b=0;null!==(h=g(n,o));){var y=u(h[0]);v[b]=y,""===y&&(n.lastIndex=p(o,a(n.lastIndex),l)),b++}return 0===b?null:v}]})},5440(t,e,r){"use strict";var n=r(8745),o=r(9565),i=r(9504),s=r(9228),c=r(9039),a=r(8551),u=r(4901),l=r(34),h=r(1291),p=r(8014),f=r(655),g=r(7750),d=r(7829),v=r(5966),b=r(2478),y=r(1034),_=r(6682),m=r(8227)("replace"),w=Math.max,S=Math.min,E=i([].concat),O=i([].push),C=i("".indexOf),T=i("".slice),x=function(t){return void 0===t?t:String(t)},k="$0"==="a".replace(/./,"$0"),P=!!/./[m]&&""===/./[m]("a","$0");s("replace",function(t,e,r){var i=P?"$":"$0";return[function(t,r){var n=g(this),i=l(t)?v(t,m):void 0;return i?o(i,t,n,r):o(e,f(n),t,r)},function(t,o){var s=a(this),c=f(t);if("string"==typeof o&&-1===C(o,i)&&-1===C(o,"$<")){var l=r(e,s,c,o);if(l.done)return l.value}var g=u(o);g||(o=f(o));var v,m=f(y(s)),k=-1!==C(m,"g");k&&(v=-1!==C(m,"u"),s.lastIndex=0);for(var P,I=[];null!==(P=_(s,c))&&(O(I,P),k);){""===f(P[0])&&(s.lastIndex=d(c,p(s.lastIndex),v))}for(var R="",j=0,A=0;A<I.length;A++){for(var D,M=f((P=I[A])[0]),L=w(S(h(P.index),c.length),0),N=[],F=1;F<P.length;F++)O(N,x(P[F]));var U=P.groups;if(g){var H=E([M],N,L,c);void 0!==U&&O(H,U),D=f(n(o,void 0,H))}else D=b(M,c,L,N,U,o);L>=j&&(R+=T(c,j,L)+D,j=L+M.length)}return R+T(c,j)}]},!!c(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})||!k||P)},744(t,e,r){"use strict";var n=r(9565),o=r(9504),i=r(9228),s=r(8551),c=r(34),a=r(7750),u=r(2293),l=r(7829),h=r(8014),p=r(655),f=r(5966),g=r(6682),d=r(8429),v=r(9039),b=d.UNSUPPORTED_Y,y=Math.min,_=o([].push),m=o("".slice),w=!v(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}),S="c"==="abbc".split(/(b)*/)[1]||4!=="test".split(/(?:)/,-1).length||2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length;i("split",function(t,e,r){var o="0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:n(e,this,t,r)}:e;return[function(e,r){var i=a(this),s=c(e)?f(e,t):void 0;return s?n(s,e,i,r):n(o,p(i),e,r)},function(t,n){var i=s(this),c=p(t);if(!S){var a=r(o,i,c,n,o!==e);if(a.done)return a.value}var f=u(i,RegExp),d=i.unicode,v=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(b?"g":"y"),w=new f(b?"^(?:"+i.source+")":i,v),E=void 0===n?4294967295:n>>>0;if(0===E)return[];if(0===c.length)return null===g(w,c)?[c]:[];for(var O=0,C=0,T=[];C<c.length;){w.lastIndex=b?0:C;var x,k=g(w,b?m(c,C):c);if(null===k||(x=y(h(w.lastIndex+(b?C:0)),c.length))===O)C=l(c,C,d);else{if(_(T,m(c,O,C)),T.length===E)return T;for(var P=1;P<=k.length-1;P++)if(_(T,k[P]),T.length===E)return T;C=O=x}}return _(T,m(c,O)),T}]},S||!w,b)},5044(t,e,r){"use strict";var n=r(4644),o=r(4373),i=r(5854),s=r(6955),c=r(9565),a=r(9504),u=r(9039),l=n.aTypedArray,h=n.exportTypedArrayMethod,p=a("".slice);h("fill",function(t){var e=arguments.length;l(this);var r="Big"===p(s(this),0,3)?i(t):+t;return c(o,this,r,e>1?arguments[1]:void 0,e>2?arguments[2]:void 0)},u(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),1!==t}))},8845(t,e,r){"use strict";var n=r(4576),o=r(9565),i=r(4644),s=r(6198),c=r(8229),a=r(8981),u=r(9039),l=n.RangeError,h=n.Int8Array,p=h&&h.prototype,f=p&&p.set,g=i.aTypedArray,d=i.exportTypedArrayMethod,v=!u(function(){var t=new Uint8ClampedArray(2);return o(f,t,{length:1,0:3},1),3!==t[1]}),b=v&&i.NATIVE_ARRAY_BUFFER_VIEWS&&u(function(){var t=new h(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]});d("set",function(t){g(this);var e=c(arguments.length>1?arguments[1]:void 0,1),r=a(t);if(v)return o(f,this,r,e);var n=this.length,i=s(r),u=0;if(i+e>n)throw new l("Wrong length");for(;u<i;)this[e+u]=r[u++]},!v||b)},373(t,e,r){"use strict";var n=r(4576),o=r(7476),i=r(9039),s=r(9306),c=r(4488),a=r(4644),u=r(3709),l=r(3763),h=r(9519),p=r(3607),f=a.aTypedArray,g=a.exportTypedArrayMethod,d=n.Uint16Array,v=d&&o(d.prototype.sort),b=!(!v||i(function(){v(new d(2),null)})&&i(function(){v(new d(2),{})})),y=!!v&&!i(function(){if(h)return h<74;if(u)return u<67;if(l)return!0;if(p)return p<602;var t,e,r=new d(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(v(r,function(t,e){return(t/4|0)-(e/4|0)}),t=0;t<516;t++)if(r[t]!==n[t])return!0});g("sort",function(t){return void 0!==t&&s(t),y?v(this,t):c(f(this),function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!=r?-1:e!=e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}}(t))},!y||b)},1405(t,e,r){"use strict";var n=r(4576),o=r(8745),i=r(4644),s=r(9039),c=r(7680),a=n.Int8Array,u=i.aTypedArray,l=i.exportTypedArrayMethod,h=[].toLocaleString,p=!!a&&s(function(){h.call(new a(1))});l("toLocaleString",function(){return o(h,p?c(u(this)):u(this),c(arguments))},s(function(){return[1,2].toLocaleString()!==new a([1,2]).toLocaleString()})||!s(function(){a.prototype.toLocaleString.call([1,2])}))},1489(t,e,r){"use strict";r(5823)("Uint8",function(t){return function(e,r,n){return t(this,e,r,n)}})},2480(t,e,r){"use strict";r(5081)},2953(t,e,r){"use strict";var n=r(4576),o=r(7400),i=r(9296),s=r(3792),c=r(6699),a=r(687),u=r(8227)("iterator"),l=s.values,h=function(t,e){if(t){if(t[u]!==l)try{c(t,u,l)}catch(e){t[u]=l}if(a(t,e,!0),o[e])for(var r in s)if(t[r]!==s[r])try{c(t,r,s[r])}catch(e){t[r]=s[r]}}};for(var p in o)h(n[p]&&n[p].prototype,p);h(i,"DOMTokenList")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{"use strict";r.r(n),r.d(n,{StreamConnector:()=>re,StreamErrors:()=>Ut,StreamEventTypes:()=>wt,StreamSubscription:()=>oe});var t={};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function o(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function i(t,e,r){return(e=o(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.r(t),r.d(t,{AbortError:()=>f,DefaultHttpClient:()=>G,HttpClient:()=>S,HttpError:()=>h,HttpResponse:()=>w,HttpTransportType:()=>s,HubConnection:()=>ft,HubConnectionBuilder:()=>yt,HubConnectionState:()=>pt,JsonHubProtocol:()=>gt,LogLevel:()=>l,MessageType:()=>at,NullLogger:()=>E,Subject:()=>ht,TimeoutError:()=>p,TransferFormat:()=>c,VERSION:()=>T});var s,c;r(3362),r(2953);!function(t){t[t.None=0]="None",t[t.WebSockets=1]="WebSockets",t[t.ServerSentEvents=2]="ServerSentEvents",t[t.LongPolling=4]="LongPolling"}(s||(s={})),function(t){t[t.Text=1]="Text",t[t.Binary=2]="Binary"}(c||(c={}));const a=[0,2e3,1e4,3e4,null];class u{constructor(t){this._retryDelays=void 0!==t?[...t,null]:a}nextRetryDelayInMilliseconds(t){return this._retryDelays[t.previousRetryCount]}}var l;r(2712),r(4743),r(1745),r(1489),r(5044),r(8845),r(373),r(1405);class h extends Error{constructor(t,e){const r=new.target.prototype;super("".concat(t,": Status code '").concat(e,"'")),this.statusCode=e,this.__proto__=r}}class p extends Error{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"A timeout occurred.";const e=new.target.prototype;super(t),this.__proto__=e}}class f extends Error{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"An abort occurred.";const e=new.target.prototype;super(t),this.__proto__=e}}class g extends Error{constructor(t,e){const r=new.target.prototype;super(t),this.transport=e,this.errorType="UnsupportedTransportError",this.__proto__=r}}class d extends Error{constructor(t,e){const r=new.target.prototype;super(t),this.transport=e,this.errorType="DisabledTransportError",this.__proto__=r}}class v extends Error{constructor(t,e){const r=new.target.prototype;super(t),this.transport=e,this.errorType="FailedToStartTransportError",this.__proto__=r}}class b extends Error{constructor(t){const e=new.target.prototype;super(t),this.errorType="FailedToNegotiateWithServerError",this.__proto__=e}}class y extends Error{constructor(t,e){const r=new.target.prototype;super(t),this.innerErrors=e,this.__proto__=r}}function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class w{constructor(t,e,r){this.statusCode=t,this.statusText=e,this.content=r}}class S{get(t,e){return this.send(m(m({},e),{},{method:"GET",url:t}))}post(t,e){return this.send(m(m({},e),{},{method:"POST",url:t}))}delete(t,e){return this.send(m(m({},e),{},{method:"DELETE",url:t}))}getCookieString(t){return""}}!function(t){t[t.Trace=0]="Trace",t[t.Debug=1]="Debug",t[t.Information=2]="Information",t[t.Warning=3]="Warning",t[t.Error=4]="Error",t[t.Critical=5]="Critical",t[t.None=6]="None"}(l||(l={}));r(7495),r(8781),r(1761),r(2480);class E{constructor(){}log(t,e){}}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function C(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}E.instance=new E;const T="6.0.25";class x{static isRequired(t,e){if(null==t)throw new Error("The '".concat(e,"' argument is required."))}static isNotEmpty(t,e){if(!t||t.match(/^\s*$/))throw new Error("The '".concat(e,"' argument should not be empty."))}static isIn(t,e,r){if(!(t in e))throw new Error("Unknown ".concat(r," value: ").concat(t,"."))}}class k{static get isBrowser(){return"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return"object"==typeof self&&"importScripts"in self}static get isReactNative(){return"object"==typeof window&&void 0===window.document}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function P(t,e){let r="";return I(t)?(r="Binary data of length ".concat(t.byteLength),e&&(r+=". Content: '".concat(function(t){const e=new Uint8Array(t);let r="";return e.forEach(t=>{r+="0x".concat(t<16?"0":"").concat(t.toString(16)," ")}),r.substr(0,r.length-1)}(t),"'"))):"string"==typeof t&&(r="String data of length ".concat(t.length),e&&(r+=". Content: '".concat(t,"'"))),r}function I(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}async function R(t,e,r,n,o,i,s){let c={};if(o){const t=await o();t&&(c={Authorization:"Bearer ".concat(t)})}const[a,u]=D();c[a]=u,t.log(l.Trace,"(".concat(e," transport) sending data. ").concat(P(i,s.logMessageContent),"."));const h=I(i)?"arraybuffer":"text",p=await r.post(n,{content:i,headers:C(C({},c),s.headers),responseType:h,timeout:s.timeout,withCredentials:s.withCredentials});t.log(l.Trace,"(".concat(e," transport) request complete. Response status: ").concat(p.statusCode,"."))}class j{constructor(t,e){this._subject=t,this._observer=e}dispose(){const t=this._subject.observers.indexOf(this._observer);t>-1&&this._subject.observers.splice(t,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class A{constructor(t){this._minLevel=t,this.out=console}log(t,e){if(t>=this._minLevel){const r="[".concat((new Date).toISOString(),"] ").concat(l[t],": ").concat(e);switch(t){case l.Critical:case l.Error:this.out.error(r);break;case l.Warning:this.out.warn(r);break;case l.Information:this.out.info(r);break;default:this.out.log(r)}}}}function D(){let t="X-SignalR-User-Agent";return k.isNode&&(t="User-Agent"),[t,M(T,L(),F(),N())]}function M(t,e,r,n){let o="Microsoft SignalR/";const i=t.split(".");return o+="".concat(i[0],".").concat(i[1]),o+=" (".concat(t,"; "),o+=e&&""!==e?"".concat(e,"; "):"Unknown OS; ",o+="".concat(r),o+=n?"; ".concat(n):"; Unknown Runtime Version",o+=")",o}function L(){if(!k.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function N(){if(k.isNode)return process.versions.node}function F(){return k.isNode?"NodeJS":"Browser"}function U(t){return t.stack?t.stack:t.message?t.message:"".concat(t)}function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function B(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class W extends S{constructor(t){if(super(),this._logger=t,"undefined"==typeof fetch){const t=require;this._jar=new(t("tough-cookie").CookieJar),this._fetchType=t("node-fetch"),this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("could not find global")}());if("undefined"==typeof AbortController){const t=require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}async send(t){if(t.abortSignal&&t.abortSignal.aborted)throw new f;if(!t.method)throw new Error("No method defined.");if(!t.url)throw new Error("No url defined.");const e=new this._abortControllerType;let r;t.abortSignal&&(t.abortSignal.onabort=()=>{e.abort(),r=new f});let n,o=null;if(t.timeout){const n=t.timeout;o=setTimeout(()=>{e.abort(),this._logger.log(l.Warning,"Timeout from HTTP request."),r=new p},n)}try{n=await this._fetchType(t.url,{body:t.content,cache:"no-cache",credentials:!0===t.withCredentials?"include":"same-origin",headers:B({"Content-Type":"text/plain;charset=UTF-8","X-Requested-With":"XMLHttpRequest"},t.headers),method:t.method,mode:"cors",redirect:"follow",signal:e.signal})}catch(t){if(r)throw r;throw this._logger.log(l.Warning,"Error from HTTP request. ".concat(t,".")),t}finally{o&&clearTimeout(o),t.abortSignal&&(t.abortSignal.onabort=null)}if(!n.ok){const t=await q(n,"text");throw new h(t||n.statusText,n.status)}const i=q(n,t.responseType),s=await i;return new w(n.status,n.statusText,s)}getCookieString(t){let e="";return k.isNode&&this._jar&&this._jar.getCookies(t,(t,r)=>e=r.join("; ")),e}}function q(t,e){let r;switch(e){case"arraybuffer":r=t.arrayBuffer();break;case"text":default:r=t.text();break;case"blob":case"document":case"json":throw new Error("".concat(e," is not supported."))}return r}class V extends S{constructor(t){super(),this._logger=t}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new f):t.method?t.url?new Promise((e,r)=>{const n=new XMLHttpRequest;n.open(t.method,t.url,!0),n.withCredentials=void 0===t.withCredentials||t.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8");const o=t.headers;o&&Object.keys(o).forEach(t=>{n.setRequestHeader(t,o[t])}),t.responseType&&(n.responseType=t.responseType),t.abortSignal&&(t.abortSignal.onabort=()=>{n.abort(),r(new f)}),t.timeout&&(n.timeout=t.timeout),n.onload=()=>{t.abortSignal&&(t.abortSignal.onabort=null),n.status>=200&&n.status<300?e(new w(n.status,n.statusText,n.response||n.responseText)):r(new h(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(l.Warning,"Error from HTTP request. ".concat(n.status,": ").concat(n.statusText,".")),r(new h(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(l.Warning,"Timeout from HTTP request."),r(new p)},n.send(t.content||"")}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class G extends S{constructor(t){if(super(),"undefined"!=typeof fetch||k.isNode)this._httpClient=new W(t);else{if("undefined"==typeof XMLHttpRequest)throw new Error("No usable HttpClient found.");this._httpClient=new V(t)}}send(t){return t.abortSignal&&t.abortSignal.aborted?Promise.reject(new f):t.method?t.url?this._httpClient.send(t):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(t){return this._httpClient.getCookieString(t)}}class z{}z.Authorization="Authorization",z.Cookie="Cookie";class K{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}function $(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class J{constructor(t,e,r,n){this._httpClient=t,this._accessTokenFactory=e,this._logger=r,this._pollAbort=new K,this._options=n,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}async connect(t,e){if(x.isRequired(t,"url"),x.isRequired(e,"transferFormat"),x.isIn(e,c,"transferFormat"),this._url=t,this._logger.log(l.Trace,"(LongPolling transport) Connecting."),e===c.Binary&&"undefined"!=typeof XMLHttpRequest&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,n]=D(),o=Y({[r]:n},this._options.headers),i={abortSignal:this._pollAbort.signal,headers:o,timeout:1e5,withCredentials:this._options.withCredentials};e===c.Binary&&(i.responseType="arraybuffer");const s=await this._getAccessToken();this._updateHeaderToken(i,s);const a="".concat(t,"&_=").concat(Date.now());this._logger.log(l.Trace,"(LongPolling transport) polling: ".concat(a,"."));const u=await this._httpClient.get(a,i);200!==u.statusCode?(this._logger.log(l.Error,"(LongPolling transport) Unexpected response code: ".concat(u.statusCode,".")),this._closeError=new h(u.statusText||"",u.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,i)}async _getAccessToken(){return this._accessTokenFactory?await this._accessTokenFactory():null}_updateHeaderToken(t,e){t.headers||(t.headers={}),e?t.headers[z.Authorization]="Bearer ".concat(e):t.headers[z.Authorization]&&delete t.headers[z.Authorization]}async _poll(t,e){try{for(;this._running;){const r=await this._getAccessToken();this._updateHeaderToken(e,r);try{const r="".concat(t,"&_=").concat(Date.now());this._logger.log(l.Trace,"(LongPolling transport) polling: ".concat(r,"."));const n=await this._httpClient.get(r,e);204===n.statusCode?(this._logger.log(l.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):200!==n.statusCode?(this._logger.log(l.Error,"(LongPolling transport) Unexpected response code: ".concat(n.statusCode,".")),this._closeError=new h(n.statusText||"",n.statusCode),this._running=!1):n.content?(this._logger.log(l.Trace,"(LongPolling transport) data received. ".concat(P(n.content,this._options.logMessageContent),".")),this.onreceive&&this.onreceive(n.content)):this._logger.log(l.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof p?this._logger.log(l.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(l.Trace,"(LongPolling transport) Poll errored after shutdown: ".concat(t.message))}}}finally{this._logger.log(l.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(t){return this._running?R(this._logger,"LongPolling",this._httpClient,this._url,this._accessTokenFactory,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(l.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(l.Trace,"(LongPolling transport) sending DELETE request to ".concat(this._url,"."));const t={},[e,r]=D();t[e]=r;const n={headers:Y(Y({},t),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},o=await this._getAccessToken();this._updateHeaderToken(n,o),await this._httpClient.delete(this._url,n),this._logger.log(l.Trace,"(LongPolling transport) DELETE request sent.")}finally{this._logger.log(l.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let t="(LongPolling transport) Firing onclose event.";this._closeError&&(t+=" Error: "+this._closeError),this._logger.log(l.Trace,t),this.onclose(this._closeError)}}}function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class Z{constructor(t,e,r,n){this._httpClient=t,this._accessTokenFactory=e,this._logger=r,this._options=n,this.onreceive=null,this.onclose=null}async connect(t,e){if(x.isRequired(t,"url"),x.isRequired(e,"transferFormat"),x.isIn(e,c,"transferFormat"),this._logger.log(l.Trace,"(SSE transport) Connecting."),this._url=t,this._accessTokenFactory){const e=await this._accessTokenFactory();e&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(e)))}return new Promise((r,n)=>{let o,i=!1;if(e===c.Text){if(k.isBrowser||k.isWebWorker)o=new this._options.EventSource(t,{withCredentials:this._options.withCredentials});else{const e=this._httpClient.getCookieString(t),r={};r.Cookie=e;const[n,i]=D();r[n]=i,o=new this._options.EventSource(t,{withCredentials:this._options.withCredentials,headers:Q(Q({},r),this._options.headers)})}try{o.onmessage=t=>{if(this.onreceive)try{this._logger.log(l.Trace,"(SSE transport) data received. ".concat(P(t.data,this._options.logMessageContent),".")),this.onreceive(t.data)}catch(t){return void this._close(t)}},o.onerror=t=>{i?this._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(l.Information,"SSE connected to ".concat(this._url)),this._eventSource=o,i=!0,r()}}catch(t){return void n(t)}}else n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})}async send(t){return this._eventSource?R(this._logger,"SSE",this._httpClient,this._url,this._accessTokenFactory,t,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(t){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(t))}}r(5440);function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class rt{constructor(t,e,r,n,o,i){this._logger=r,this._accessTokenFactory=e,this._logMessageContent=n,this._webSocketConstructor=o,this._httpClient=t,this.onreceive=null,this.onclose=null,this._headers=i}async connect(t,e){if(x.isRequired(t,"url"),x.isRequired(e,"transferFormat"),x.isIn(e,c,"transferFormat"),this._logger.log(l.Trace,"(WebSockets transport) Connecting."),this._accessTokenFactory){const e=await this._accessTokenFactory();e&&(t+=(t.indexOf("?")<0?"?":"&")+"access_token=".concat(encodeURIComponent(e)))}return new Promise((r,n)=>{let o;t=t.replace(/^http/,"ws");const i=this._httpClient.getCookieString(t);let s=!1;if(k.isNode){const e={},[r,n]=D();e[r]=n,i&&(e[z.Cookie]="".concat(i)),o=new this._webSocketConstructor(t,void 0,{headers:et(et({},e),this._headers)})}o||(o=new this._webSocketConstructor(t)),e===c.Binary&&(o.binaryType="arraybuffer"),o.onopen=e=>{this._logger.log(l.Information,"WebSocket connected to ".concat(t,".")),this._webSocket=o,s=!0,r()},o.onerror=t=>{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"There was an error with the transport",this._logger.log(l.Information,"(WebSockets transport) ".concat(e,"."))},o.onmessage=t=>{if(this._logger.log(l.Trace,"(WebSockets transport) data received. ".concat(P(t.data,this._logMessageContent),".")),this.onreceive)try{this.onreceive(t.data)}catch(t){return void this._close(t)}},o.onclose=t=>{if(s)this._close(t);else{let e=null;e="undefined"!=typeof ErrorEvent&&t instanceof ErrorEvent?t.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",n(new Error(e))}}})}send(t){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(l.Trace,"(WebSockets transport) sending data. ".concat(P(t,this._logMessageContent),".")),this._webSocket.send(t),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(t){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(l.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(t)||!1!==t.wasClean&&1e3===t.code?t instanceof Error?this.onclose(t):this.onclose():this.onclose(new Error("WebSocket closed with status code: ".concat(t.code," (").concat(t.reason||"no reason given",")."))))}_isCloseEvent(t){return t&&"boolean"==typeof t.wasClean&&"number"==typeof t.code}}function nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class it{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,x.isRequired(t,"url"),this._logger=void 0===(r=e.logger)?new A(l.Information):null===r?E.instance:void 0!==r.log?r:new A(r),this.baseUrl=this._resolveUrl(t),e=e||{},e.logMessageContent=void 0!==e.logMessageContent&&e.logMessageContent,"boolean"!=typeof e.withCredentials&&void 0!==e.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");e.withCredentials=void 0===e.withCredentials||e.withCredentials,e.timeout=void 0===e.timeout?1e5:e.timeout;let n=null,o=null;if(k.isNode){const t=require;n=t("ws"),o=t("eventsource")}k.isNode||"undefined"==typeof WebSocket||e.WebSocket?k.isNode&&!e.WebSocket&&n&&(e.WebSocket=n):e.WebSocket=WebSocket,k.isNode||"undefined"==typeof EventSource||e.EventSource?k.isNode&&!e.EventSource&&void 0!==o&&(e.EventSource=o):e.EventSource=EventSource,this._httpClient=e.httpClient||new G(this._logger),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=e,this.onreceive=null,this.onclose=null}async start(t){if(t=t||c.Binary,x.isIn(t,c,"transferFormat"),this._logger.log(l.Debug,"Starting connection with transfer format '".concat(c[t],"'.")),"Disconnected"!==this._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(t),await this._startInternalPromise,"Disconnecting"===this._connectionState){const t="Failed to start the HttpConnection before stop() was called.";return this._logger.log(l.Error,t),await this._stopPromise,Promise.reject(new Error(t))}if("Connected"!==this._connectionState){const t="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(l.Error,t),Promise.reject(new Error(t))}this._connectionStarted=!0}send(t){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new st(this.transport)),this._sendQueue.send(t))}async stop(t){return"Disconnected"===this._connectionState?(this._logger.log(l.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnected state.")),Promise.resolve()):"Disconnecting"===this._connectionState?(this._logger.log(l.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnecting state.")),this._stopPromise):(this._connectionState="Disconnecting",this._stopPromise=new Promise(t=>{this._stopPromiseResolver=t}),await this._stopInternal(t),void await this._stopPromise)}async _stopInternal(t){this._stopError=t;try{await this._startInternalPromise}catch(t){}if(this.transport){try{await this.transport.stop()}catch(t){this._logger.log(l.Error,"HttpConnection.transport.stop() threw error '".concat(t,"'.")),this._stopConnection()}this.transport=void 0}else this._logger.log(l.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(t){let e=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory;try{if(this._options.skipNegotiation){if(this._options.transport!==s.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");this.transport=this._constructTransport(s.WebSockets),await this._startTransport(e,t)}else{let r=null,n=0;do{if(r=await this._getNegotiationResponse(e),"Disconnecting"===this._connectionState||"Disconnected"===this._connectionState)throw new Error("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(e=r.url),r.accessToken){const t=r.accessToken;this._accessTokenFactory=()=>t}n++}while(r.url&&n<100);if(100===n&&r.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(e,this._options.transport,r,t)}this.transport instanceof J&&(this.features.inherentKeepAlive=!0),"Connecting"===this._connectionState&&(this._logger.log(l.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(l.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}}async _getNegotiationResponse(t){const e={};if(this._accessTokenFactory){const t=await this._accessTokenFactory();t&&(e[z.Authorization]="Bearer ".concat(t))}const[r,n]=D();e[r]=n;const o=this._resolveNegotiateUrl(t);this._logger.log(l.Debug,"Sending negotiation request: ".concat(o,"."));try{const t=await this._httpClient.post(o,{content:"",headers:ot(ot({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(200!==t.statusCode)return Promise.reject(new Error("Unexpected status code returned from negotiate '".concat(t.statusCode,"'")));const r=JSON.parse(t.content);return(!r.negotiateVersion||r.negotiateVersion<1)&&(r.connectionToken=r.connectionId),r}catch(t){let e="Failed to complete negotiation with the server: "+t;return t instanceof h&&404===t.statusCode&&(e+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(l.Error,e),Promise.reject(new b(e))}}_createConnectUrl(t,e){return e?t+(-1===t.indexOf("?")?"?":"&")+"id=".concat(e):t}async _createTransport(t,e,r,n){let o=this._createConnectUrl(t,r.connectionToken);if(this._isITransport(e))return this._logger.log(l.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=e,await this._startTransport(o,n),void(this.connectionId=r.connectionId);const i=[],c=r.availableTransports||[];let a=r;for(const r of c){const c=this._resolveTransportOrError(r,e,n);if(c instanceof Error)i.push("".concat(r.transport," failed:")),i.push(c);else if(this._isITransport(c)){if(this.transport=c,!a){try{a=await this._getNegotiationResponse(t)}catch(t){return Promise.reject(t)}o=this._createConnectUrl(t,a.connectionToken)}try{return await this._startTransport(o,n),void(this.connectionId=a.connectionId)}catch(t){if(this._logger.log(l.Error,"Failed to start the transport '".concat(r.transport,"': ").concat(t)),a=void 0,i.push(new v("".concat(r.transport," failed: ").concat(t),s[r.transport])),"Connecting"!==this._connectionState){const t="Failed to select transport before stop() was called.";return this._logger.log(l.Debug,t),Promise.reject(new Error(t))}}}}return i.length>0?Promise.reject(new y("Unable to connect to the server with any of the available transports. ".concat(i.join(" ")),i)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(t){switch(t){case s.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new rt(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case s.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Z(this._httpClient,this._accessTokenFactory,this._logger,this._options);case s.LongPolling:return new J(this._httpClient,this._accessTokenFactory,this._logger,this._options);default:throw new Error("Unknown transport: ".concat(t,"."))}}_startTransport(t,e){return this.transport.onreceive=this.onreceive,this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(t,e)}_resolveTransportOrError(t,e,r){const n=s[t.transport];if(null==n)return this._logger.log(l.Debug,"Skipping transport '".concat(t.transport,"' because it is not supported by this client.")),new Error("Skipping transport '".concat(t.transport,"' because it is not supported by this client."));if(!function(t,e){return!t||0!==(e&t)}(e,n))return this._logger.log(l.Debug,"Skipping transport '".concat(s[n],"' because it was disabled by the client.")),new d("'".concat(s[n],"' is disabled by the client."),n);if(!(t.transferFormats.map(t=>c[t]).indexOf(r)>=0))return this._logger.log(l.Debug,"Skipping transport '".concat(s[n],"' because it does not support the requested transfer format '").concat(c[r],"'.")),new Error("'".concat(s[n],"' does not support ").concat(c[r],"."));if(n===s.WebSockets&&!this._options.WebSocket||n===s.ServerSentEvents&&!this._options.EventSource)return this._logger.log(l.Debug,"Skipping transport '".concat(s[n],"' because it is not supported in your environment.'")),new g("'".concat(s[n],"' is not supported in your environment."),n);this._logger.log(l.Debug,"Selecting transport '".concat(s[n],"'."));try{return this._constructTransport(n)}catch(t){return t}}_isITransport(t){return t&&"object"==typeof t&&"connect"in t}_stopConnection(t){if(this._logger.log(l.Debug,"HttpConnection.stopConnection(".concat(t,") called while in state ").concat(this._connectionState,".")),this.transport=void 0,t=this._stopError||t,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(l.Warning,"Call to HttpConnection.stopConnection(".concat(t,") was ignored because the connection is still in the connecting state.")),new Error("HttpConnection.stopConnection(".concat(t,") was called while the connection is still in the connecting state."));if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),t?this._logger.log(l.Error,"Connection disconnected with error '".concat(t,"'.")):this._logger.log(l.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(l.Error,"TransportSendQueue.stop() threw error '".concat(t,"'."))}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(t)}catch(e){this._logger.log(l.Error,"HttpConnection.onclose(".concat(t,") threw error '").concat(e,"'."))}}}else this._logger.log(l.Debug,"Call to HttpConnection.stopConnection(".concat(t,") was ignored because the connection is already in the disconnected state."))}_resolveUrl(t){if(0===t.lastIndexOf("https://",0)||0===t.lastIndexOf("http://",0))return t;if(!k.isBrowser)throw new Error("Cannot resolve '".concat(t,"'."));const e=window.document.createElement("a");return e.href=t,this._logger.log(l.Information,"Normalizing '".concat(t,"' to '").concat(e.href,"'.")),e.href}_resolveNegotiateUrl(t){const e=t.indexOf("?");let r=t.substring(0,-1===e?t.length:e);return"/"!==r[r.length-1]&&(r+="/"),r+="negotiate",r+=-1===e?"":t.substring(e),-1===r.indexOf("negotiateVersion")&&(r+=-1===e?"?":"&",r+="negotiateVersion="+this._negotiateVersion),r}}class st{constructor(t){this._transport=t,this._buffer=[],this._executing=!0,this._sendBufferedData=new ct,this._transportResult=new ct,this._sendLoopPromise=this._sendLoop()}send(t){return this._bufferData(t),this._transportResult||(this._transportResult=new ct),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(t){if(this._buffer.length&&typeof this._buffer[0]!=typeof t)throw new Error("Expected data to be of type ".concat(typeof this._buffer," but was of type ").concat(typeof t));this._buffer.push(t),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ct;const t=this._transportResult;this._transportResult=void 0;const e="string"==typeof this._buffer[0]?this._buffer.join(""):st._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(e),t.resolve()}catch(e){t.reject(e)}}}static _concatBuffers(t){const e=t.map(t=>t.byteLength).reduce((t,e)=>t+e),r=new Uint8Array(e);let n=0;for(const e of t)r.set(new Uint8Array(e),n),n+=e.byteLength;return r.buffer}}class ct{constructor(){this.promise=new Promise((t,e)=>[this._resolver,this._rejecter]=[t,e])}resolve(){this._resolver()}reject(t){this._rejecter(t)}}var at;r(744);class ut{static write(t){return"".concat(t).concat(ut.RecordSeparator)}static parse(t){if(t[t.length-1]!==ut.RecordSeparator)throw new Error("Message is incomplete.");const e=t.split(ut.RecordSeparator);return e.pop(),e}}ut.RecordSeparatorCode=30,ut.RecordSeparator=String.fromCharCode(ut.RecordSeparatorCode);class lt{writeHandshakeRequest(t){return ut.write(JSON.stringify(t))}parseHandshakeResponse(t){let e,r;if(I(t)){const n=new Uint8Array(t),o=n.indexOf(ut.RecordSeparatorCode);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;e=String.fromCharCode.apply(null,Array.prototype.slice.call(n.slice(0,i))),r=n.byteLength>i?n.slice(i).buffer:null}else{const n=t,o=n.indexOf(ut.RecordSeparator);if(-1===o)throw new Error("Message is incomplete.");const i=o+1;e=n.substring(0,i),r=n.length>i?n.substring(i):null}const n=ut.parse(e),o=JSON.parse(n[0]);if(o.type)throw new Error("Expected a handshake response from the server.");return[r,o]}}!function(t){t[t.Invocation=1]="Invocation",t[t.StreamItem=2]="StreamItem",t[t.Completion=3]="Completion",t[t.StreamInvocation=4]="StreamInvocation",t[t.CancelInvocation=5]="CancelInvocation",t[t.Ping=6]="Ping",t[t.Close=7]="Close"}(at||(at={}));class ht{constructor(){this.observers=[]}next(t){for(const e of this.observers)e.next(t)}error(t){for(const e of this.observers)e.error&&e.error(t)}complete(){for(const t of this.observers)t.complete&&t.complete()}subscribe(t){return this.observers.push(t),new j(this,t)}}var pt;!function(t){t.Disconnected="Disconnected",t.Connecting="Connecting",t.Connected="Connected",t.Disconnecting="Disconnecting",t.Reconnecting="Reconnecting"}(pt||(pt={}));class ft{constructor(t,e,r,n){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(l.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},x.isRequired(t,"connection"),x.isRequired(e,"logger"),x.isRequired(r,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=e,this._protocol=r,this.connection=t,this._reconnectPolicy=n,this._handshakeProtocol=new lt,this.connection.onreceive=t=>this._processIncomingData(t),this.connection.onclose=t=>this._connectionClosed(t),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=pt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:at.Ping})}static create(t,e,r,n){return new ft(t,e,r,n)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(t){if(this._connectionState!==pt.Disconnected&&this._connectionState!==pt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!t)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=t}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==pt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=pt.Connecting,this._logger.log(l.Debug,"Starting HubConnection.");try{await this._startInternal(),k.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=pt.Connected,this._connectionStarted=!0,this._logger.log(l.Debug,"HubConnection connected successfully.")}catch(t){return this._connectionState=pt.Disconnected,this._logger.log(l.Debug,"HubConnection failed to start successfully because of error '".concat(t,"'.")),Promise.reject(t)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const t=new Promise((t,e)=>{this._handshakeResolver=t,this._handshakeRejecter=e});await this.connection.start(this._protocol.transferFormat);try{const e={protocol:this._protocol.name,version:this._protocol.version};if(this._logger.log(l.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(e)),this._logger.log(l.Information,"Using HubProtocol '".concat(this._protocol.name,"'.")),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await t,this._stopDuringStartError)throw this._stopDuringStartError}catch(t){throw this._logger.log(l.Debug,"Hub handshake failed with error '".concat(t,"' during start(). Stopping HubConnection.")),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(t),t}}async stop(){const t=this._startPromise;this._stopPromise=this._stopInternal(),await this._stopPromise;try{await t}catch(t){}}_stopInternal(t){return this._connectionState===pt.Disconnected?(this._logger.log(l.Debug,"Call to HubConnection.stop(".concat(t,") ignored because it is already in the disconnected state.")),Promise.resolve()):this._connectionState===pt.Disconnecting?(this._logger.log(l.Debug,"Call to HttpConnection.stop(".concat(t,") ignored because the connection is already in the disconnecting state.")),this._stopPromise):(this._connectionState=pt.Disconnecting,this._logger.log(l.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(l.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=t||new Error("The connection was stopped before the hub handshake could complete."),this.connection.stop(t)))}stream(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const[o,i]=this._replaceStreamingParams(r),s=this._createStreamInvocation(t,r,i);let c;const a=new ht;return a.cancelCallback=()=>{const t=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],c.then(()=>this._sendWithProtocol(t))},this._callbacks[s.invocationId]=(t,e)=>{e?a.error(e):t&&(t.type===at.Completion?t.error?a.error(new Error(t.error)):a.complete():a.next(t.item))},c=this._sendWithProtocol(s).catch(t=>{a.error(t),delete this._callbacks[s.invocationId]}),this._launchStreams(o,c),a}_sendMessage(t){return this._resetKeepAliveInterval(),this.connection.send(t)}_sendWithProtocol(t){return this._sendMessage(this._protocol.writeMessage(t))}send(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const[o,i]=this._replaceStreamingParams(r),s=this._sendWithProtocol(this._createInvocation(t,r,!0,i));return this._launchStreams(o,s),s}invoke(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];const[o,i]=this._replaceStreamingParams(r),s=this._createInvocation(t,r,!1,i);return new Promise((t,e)=>{this._callbacks[s.invocationId]=(r,n)=>{n?e(n):r&&(r.type===at.Completion?r.error?e(new Error(r.error)):t(r.result):e(new Error("Unexpected message type: ".concat(r.type))))};const r=this._sendWithProtocol(s).catch(t=>{e(t),delete this._callbacks[s.invocationId]});this._launchStreams(o,r)})}on(t,e){t&&e&&(t=t.toLowerCase(),this._methods[t]||(this._methods[t]=[]),-1===this._methods[t].indexOf(e)&&this._methods[t].push(e))}off(t,e){if(!t)return;t=t.toLowerCase();const r=this._methods[t];if(r)if(e){const n=r.indexOf(e);-1!==n&&(r.splice(n,1),0===r.length&&delete this._methods[t])}else delete this._methods[t]}onclose(t){t&&this._closedCallbacks.push(t)}onreconnecting(t){t&&this._reconnectingCallbacks.push(t)}onreconnected(t){t&&this._reconnectedCallbacks.push(t)}_processIncomingData(t){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(t=this._processHandshakeResponse(t),this._receivedHandshakeResponse=!0),t){const e=this._protocol.parseMessages(t,this._logger);for(const t of e)switch(t.type){case at.Invocation:this._invokeClientMethod(t);break;case at.StreamItem:case at.Completion:{const e=this._callbacks[t.invocationId];if(e){t.type===at.Completion&&delete this._callbacks[t.invocationId];try{e(t)}catch(t){this._logger.log(l.Error,"Stream callback threw error: ".concat(U(t)))}}break}case at.Ping:break;case at.Close:{this._logger.log(l.Information,"Close message received from server.");const e=t.error?new Error("Server returned an error on close: "+t.error):void 0;!0===t.allowReconnect?this.connection.stop(e):this._stopPromise=this._stopInternal(e);break}default:this._logger.log(l.Warning,"Invalid message type: ".concat(t.type,"."))}}this._resetTimeoutPeriod()}_processHandshakeResponse(t){let e,r;try{[r,e]=this._handshakeProtocol.parseHandshakeResponse(t)}catch(t){const e="Error parsing handshake response: "+t;this._logger.log(l.Error,e);const r=new Error(e);throw this._handshakeRejecter(r),r}if(e.error){const t="Server returned handshake error: "+e.error;this._logger.log(l.Error,t);const r=new Error(t);throw this._handshakeRejecter(r),r}return this._logger.log(l.Debug,"Server handshake complete."),this._handshakeResolver(),r}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let t=this._nextKeepAlive-(new Date).getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(async()=>{if(this._connectionState===pt.Connected)try{await this._sendMessage(this._cachedPingMessage)}catch(t){this._cleanupPingTimer()}},t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(t){const e=this._methods[t.target.toLowerCase()];if(e){try{e.forEach(e=>e.apply(this,t.arguments))}catch(e){this._logger.log(l.Error,"A callback for the method ".concat(t.target.toLowerCase()," threw error '").concat(e,"'."))}if(t.invocationId){const t="Server requested a response, which is not supported in this version of the client.";this._logger.log(l.Error,t),this._stopPromise=this._stopInternal(new Error(t))}}else this._logger.log(l.Warning,"No client method with the name '".concat(t.target,"' found."))}_connectionClosed(t){this._logger.log(l.Debug,"HubConnection.connectionClosed(".concat(t,") called while in state ").concat(this._connectionState,".")),this._stopDuringStartError=this._stopDuringStartError||t||new Error("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(t||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===pt.Disconnecting?this._completeClose(t):this._connectionState===pt.Connected&&this._reconnectPolicy?this._reconnect(t):this._connectionState===pt.Connected&&this._completeClose(t)}_completeClose(t){if(this._connectionStarted){this._connectionState=pt.Disconnected,this._connectionStarted=!1,k.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(e=>e.apply(this,[t]))}catch(e){this._logger.log(l.Error,"An onclose callback called with error '".concat(t,"' threw error '").concat(e,"'."))}}}async _reconnect(t){const e=Date.now();let r=0,n=void 0!==t?t:new Error("Attempting to reconnect due to a unknown error."),o=this._getNextRetryDelay(r++,0,n);if(null===o)return this._logger.log(l.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void this._completeClose(t);if(this._connectionState=pt.Reconnecting,t?this._logger.log(l.Information,"Connection reconnecting because of error '".concat(t,"'.")):this._logger.log(l.Information,"Connection reconnecting."),0!==this._reconnectingCallbacks.length){try{this._reconnectingCallbacks.forEach(e=>e.apply(this,[t]))}catch(e){this._logger.log(l.Error,"An onreconnecting callback called with error '".concat(t,"' threw error '").concat(e,"'."))}if(this._connectionState!==pt.Reconnecting)return void this._logger.log(l.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(this._logger.log(l.Information,"Reconnect attempt number ".concat(r," will start in ").concat(o," ms.")),await new Promise(t=>{this._reconnectDelayHandle=setTimeout(t,o)}),this._reconnectDelayHandle=void 0,this._connectionState!==pt.Reconnecting)return void this._logger.log(l.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(await this._startInternal(),this._connectionState=pt.Connected,this._logger.log(l.Information,"HubConnection reconnected successfully."),0!==this._reconnectedCallbacks.length)try{this._reconnectedCallbacks.forEach(t=>t.apply(this,[this.connection.connectionId]))}catch(t){this._logger.log(l.Error,"An onreconnected callback called with connectionId '".concat(this.connection.connectionId,"; threw error '").concat(t,"'."))}return}catch(t){if(this._logger.log(l.Information,"Reconnect attempt failed because of error '".concat(t,"'.")),this._connectionState!==pt.Reconnecting)return this._logger.log(l.Debug,"Connection moved to the '".concat(this._connectionState,"' from the reconnecting state during reconnect attempt. Done reconnecting.")),void(this._connectionState===pt.Disconnecting&&this._completeClose());n=t instanceof Error?t:new Error(t.toString()),o=this._getNextRetryDelay(r++,Date.now()-e,n)}}this._logger.log(l.Information,"Reconnect retries have been exhausted after ".concat(Date.now()-e," ms and ").concat(r," failed attempts. Connection disconnecting.")),this._completeClose()}_getNextRetryDelay(t,e,r){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:e,previousRetryCount:t,retryReason:r})}catch(r){return this._logger.log(l.Error,"IRetryPolicy.nextRetryDelayInMilliseconds(".concat(t,", ").concat(e,") threw error '").concat(r,"'.")),null}}_cancelCallbacksWithError(t){const e=this._callbacks;this._callbacks={},Object.keys(e).forEach(r=>{const n=e[r];try{n(null,t)}catch(e){this._logger.log(l.Error,"Stream 'error' callback called with '".concat(t,"' threw error: ").concat(U(e)))}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(t,e,r,n){if(r)return 0!==n.length?{arguments:e,streamIds:n,target:t,type:at.Invocation}:{arguments:e,target:t,type:at.Invocation};{const r=this._invocationId;return this._invocationId++,0!==n.length?{arguments:e,invocationId:r.toString(),streamIds:n,target:t,type:at.Invocation}:{arguments:e,invocationId:r.toString(),target:t,type:at.Invocation}}}_launchStreams(t,e){if(0!==t.length){e||(e=Promise.resolve());for(const r in t)t[r].subscribe({complete:()=>{e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(r)))},error:t=>{let n;n=t instanceof Error?t.message:t&&t.toString?t.toString():"Unknown error",e=e.then(()=>this._sendWithProtocol(this._createCompletionMessage(r,n)))},next:t=>{e=e.then(()=>this._sendWithProtocol(this._createStreamItemMessage(r,t)))}})}}_replaceStreamingParams(t){const e=[],r=[];for(let n=0;n<t.length;n++){const o=t[n];if(this._isObservable(o)){const i=this._invocationId;this._invocationId++,e[i]=o,r.push(i.toString()),t.splice(n,1)}}return[e,r]}_isObservable(t){return t&&t.subscribe&&"function"==typeof t.subscribe}_createStreamInvocation(t,e,r){const n=this._invocationId;return this._invocationId++,0!==r.length?{arguments:e,invocationId:n.toString(),streamIds:r,target:t,type:at.StreamInvocation}:{arguments:e,invocationId:n.toString(),target:t,type:at.StreamInvocation}}_createCancelInvocation(t){return{invocationId:t,type:at.CancelInvocation}}_createStreamItemMessage(t,e){return{invocationId:t,item:e,type:at.StreamItem}}_createCompletionMessage(t,e,r){return e?{error:e,invocationId:t,type:at.Completion}:{invocationId:t,result:r,type:at.Completion}}}class gt{constructor(){this.name="json",this.version=1,this.transferFormat=c.Text}parseMessages(t,e){if("string"!=typeof t)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!t)return[];null===e&&(e=E.instance);const r=ut.parse(t),n=[];for(const t of r){const r=JSON.parse(t);if("number"!=typeof r.type)throw new Error("Invalid payload.");switch(r.type){case at.Invocation:this._isInvocationMessage(r);break;case at.StreamItem:this._isStreamItemMessage(r);break;case at.Completion:this._isCompletionMessage(r);break;case at.Ping:case at.Close:break;default:e.log(l.Information,"Unknown message type '"+r.type+"' ignored.");continue}n.push(r)}return n}writeMessage(t){return ut.write(JSON.stringify(t))}_isInvocationMessage(t){this._assertNotEmptyString(t.target,"Invalid payload for Invocation message."),void 0!==t.invocationId&&this._assertNotEmptyString(t.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(t){if(this._assertNotEmptyString(t.invocationId,"Invalid payload for StreamItem message."),void 0===t.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(t){if(t.result&&t.error)throw new Error("Invalid payload for Completion message.");!t.result&&t.error&&this._assertNotEmptyString(t.error,"Invalid payload for Completion message."),this._assertNotEmptyString(t.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(t,e){if("string"!=typeof t||""===t)throw new Error(e)}}function dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function vt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}const bt={trace:l.Trace,debug:l.Debug,info:l.Information,information:l.Information,warn:l.Warning,warning:l.Warning,error:l.Error,critical:l.Critical,none:l.None};class yt{configureLogging(t){if(x.isRequired(t,"logging"),void 0!==t.log)this.logger=t;else if("string"==typeof t){const e=function(t){const e=bt[t.toLowerCase()];if(void 0!==e)return e;throw new Error("Unknown log level: ".concat(t))}(t);this.logger=new A(e)}else this.logger=new A(t);return this}withUrl(t,e){return x.isRequired(t,"url"),x.isNotEmpty(t,"url"),this.url=t,this.httpConnectionOptions="object"==typeof e?vt(vt({},this.httpConnectionOptions),e):vt(vt({},this.httpConnectionOptions),{},{transport:e}),this}withHubProtocol(t){return x.isRequired(t,"protocol"),this.protocol=t,this}withAutomaticReconnect(t){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return t?Array.isArray(t)?this.reconnectPolicy=new u(t):this.reconnectPolicy=t:this.reconnectPolicy=new u,this}build(){const t=this.httpConnectionOptions||{};if(void 0===t.logger&&(t.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const e=new it(this.url,t);return ft.create(e,this.logger||E.instance,this.protocol||new gt,this.reconnectPolicy)}}r(9391);var _t=r(4456),mt=r.n(_t);const wt={STATE:"state",STREAM:"stream",STREAMED_CHUNK:"chunk"},St=function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n&&!n.debugDisabled){const s=[];if(e===wt.STREAM){var o,i;const e=(null===(o=t.data)||void 0===o?void 0:o.type)||t.type,r=(null===(i=t.data)||void 0===i?void 0:i.messageType)||t.messageType;s.push("conversationData STREAM-event:",e+("conversationMessage"===e?" ("+r+")":""))}else e===wt.STREAMED_CHUNK?s.push("conversationData STREAMED_CHUNK-array:"):e===wt.STATE?s.push("conversationData STATE-array:"):s.push("conversationData (receivedAs = unknown)):");s.push(t,r),n.log.apply(null,s)}return{eventsArray:e===wt.STREAM?[t]:t,receivedAs:e}},Et=t=>new Promise(e=>setTimeout(e,t)),Ot=async(t,e,r,n)=>{try{return await t()}catch(o){if(r-1>0&&o!==n)return await Et(e),Ot(t,e,r-1,n);throw o}},Ct=function(){const t=t=>t&&"object"==typeof t;for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.reduce(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return t(r)?(Object.keys(r).forEach(n=>{const o=e[n],i=r[n];Array.isArray(i)&&Array.isArray(o)?e[n]=[...new Set([...i,...o])]:t(i)&&t(o)?e[n]=Ct(o,i):t(o)?e[n]=i:e=r}),e):r},{})},Tt=t=>{try{if("undefined"!=typeof localStorage)return localStorage.getItem(t)}catch(t){}},xt={debugDisabled:!0,log:()=>{},warn:()=>{},error:()=>{},info:()=>{}};const kt=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;r=r||xt,r.log("initBrokerConnectionFsm");const n={fsm:null,connection:null,reconnectCounter:0,eventListeners:{},brokerEventCallbacks:e},o=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return n.fsm[t](...r)},i=(t,e)=>{n.eventListeners[t]=(n.eventListeners[t]||[]).filter(t=>e&&t!==e)},s={disconnected:{_onEnter:function(){r.log("FSM: disconnected._onEnter()"),n.connection=null},connect:function(){return this.connecting}},connecting:{_onEnter:function(){r.log("FSM: connecting._onEnter()"),t._connect()},connection_ok:function(t){return n.connection=t,this.connected},connection_failed:function(t){return this.disconnected},disconnect:function(){return this.disconnecting}},connected:{_onEnter:function(e,o){var i,s;(r.log("FSM: connected._onEnter()",e,o),"reconnecting"===o)&&(null===(s=t.reSubscribeAll)||void 0===s||null===(s=s.call(t))||void 0===s||s.catch(()=>{}));"function"==typeof(null==n||null===(i=n.brokerEventCallbacks)||void 0===i?void 0:i.onConnectionStarted)&&n.brokerEventCallbacks.onConnectionStarted(n.connection)},connection_failed:function(){var t;return"function"==typeof(null==n||null===(t=n.brokerEventCallbacks)||void 0===t?void 0:t.onConnectionFailed)&&n.brokerEventCallbacks.onConnectionFailed("connection failed"),n.connection=null,n.reconnectCounter=0,this.reconnect_wait},disconnect:function(){return this.disconnecting}},reconnect_wait:{_onEnter:function(){r.log("FSM: reconnect_wait._onEnter()"),n.reconnectCounter<12?o("schedule_reconnect"):o("reconnection_failed")},schedule_reconnect:function(){r.log("FSM reconnect_wait.schedule_reconnect(): Reconnecting to broker in 10 sec..."),clearTimeout(n.reconnectTimer),n.reconnectTimer=setTimeout(function(){o("connect")}.bind(this),1e4)},connect:function(){return this.reconnecting},disconnect:function(){return this.disconnecting},reconnection_failed:function(){return this.disconnected},_onExit:function(){clearTimeout(n.reconnectTimer)}},reconnecting:{_onEnter:function(){r.log("FSM: reconnecting._onEnter()"),n.reconnectCounter++,t._connect()},connection_ok:function(t){return n.connection=t,this.connected},connection_failed:function(t){var e;return"function"==typeof(null==n||null===(e=n.brokerEventCallbacks)||void 0===e?void 0:e.onConnectionFailed)&&n.brokerEventCallbacks.onConnectionFailed(t),this.reconnect_wait},disconnect:function(){return this.disconnecting}},disconnecting:{_onEnter:function(){r.log("FSM: disconnecting._onEnter()",this),t.unSubscribeAll(),n.connection?n.connection.stop().catch(()=>{}).finally(()=>{o("disconnect_ok")}):o("disconnect_ok")},disconnect_ok:function(){var t;return"function"==typeof(null==n||null===(t=n.brokerEventCallbacks)||void 0===t?void 0:t.onDisconnected)&&n.brokerEventCallbacks.onDisconnected(),this.disconnected}}};return Object.keys(s).forEach(function(t){const e=s[t].onEnter;s[t].onEnter=function(t,r,o){let i=null;r!==o&&("function"==typeof s[r]._onExit&&s[r]._onExit.call(this,t,r,o),function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];(n.eventListeners[t]||[]).forEach(function(t){t.call(this,...r)}.bind(void 0))}("transition",{fromState:r,toState:o}),"function"==typeof s[o]._onEnter&&(i=s[o]._onEnter.call(this,t,r,o))),"function"==typeof e&&e.call(this,t,r,o),i&&this.setMachineState(i,"_onEnter")}}),n.fsm=new(mt())(s,"disconnected"),{handle:o,on:(t,e)=>(n.eventListeners[t]=(n.eventListeners[t]||[]).concat(e),{eventName:t,callback:e,off:()=>{i(t,e)}}),off:i,getState:()=>n.fsm.getMachineState(),getConnection:()=>n.connection,setEventCallbacks:t=>n.brokerEventCallbacks=t}};r(4490);function Pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}const Rt=(t,e,r)=>{const n=e.options.getMethod||"Get",[o,i]=e[e.options.topicProperty].split("::").reverse();return t.stream(n,It({type:i,[e.options.topicProperty]:o,skip:Math.max(0,r-1)||void 0},e.extraProps||{}))},jt=function(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=e.options.getReverseMethod||"GetReverse",[i,s]=e[e.options.topicProperty].split("::").reverse();return t.stream(o,It({type:s,[e.options.topicProperty]:i,skip:Math.max(0,n)||void 0,take:r},e.extraProps||{}))},At=(t,e,r)=>{const n=e.options.streamMethod||"Subscribe",[o,i]=e[e.options.topicProperty].split("::").reverse();return t.stream(n,It({type:i,[e.options.topicProperty]:o,skip:Math.max(0,r-1)||void 0},e.extraProps||{}))},Dt=function(t,e,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=n.publishMethod||"Publish";return t.invoke(i,It({topic:e,data:r},o))};let Mt=[];const Lt=t=>t&&Mt.find(e=>e.getSubscriptionId()===t.getSubscriptionId())||null,Nt=()=>Mt,Ft=t=>!(!t||"object"!=typeof t)&&(Mt=Mt.filter(e=>e.getSubscriptionId()!==t.getSubscriptionId()),!0),Ut={BROKER_DISCONNECTED:0,BROKER_CONNECT_ERROR:1,BROKER_RECONNECT_ATTEMPT_ERROR:2,BROKER_RECONNECT_FATAL_ERROR:3,BROKER_INVALID_CONNECTION_ERROR:4,TOPIC_GET_ERROR:5,TOPIC_SUBSCRIBE_ERROR:6,TOPIC_STREAM_OUT_OF_ORDER:7};function Ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ht(Object(r),!0).forEach(function(e){i(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}let Wt=xt,qt={publishMethod:"Publish",brokerUrl:null,brokerTransport:"WebSockets",brokerLogLevel:"none"},Vt=null;const Gt=()=>{let t;switch(Wt.log("_connect: Connecting to broker url: "+qt.brokerUrl),qt.brokerTransport){case"None":case"Negotiate":t={};break;case"LongPolling":t={transport:s.LongPolling};break;case"ServerSentEvents":t={transport:s.ServerSentEvents};break;default:t={skipNegotiation:!0,transport:s.WebSockets}}t.accessTokenFactory=qt.accessTokenFactory||qt.access_token&&(()=>qt.access_token)||null;const e=(new yt).withUrl(qt.brokerUrl,t).configureLogging(qt.brokerLogLevel).withAutomaticReconnect(qt.reconnectRetryPolicy||[0,500,3e3,5e3,1e4]).build();e.onreconnecting(t=>{var r;Wt.warn("_connect: Broker connection onreconnecting:",t,e.connectionState,e.receivedHandshakeResponse),"function"==typeof(null===(r=qt.brokerEventHandlers)||void 0===r?void 0:r.onReconnecting)&&qt.brokerEventHandlers.onReconnecting(t),ee()}),e.onreconnected(async t=>{var r;Wt.warn("_connect: Broker connection onreconnected:",e.connectionState,e.receivedHandshakeResponse),"function"==typeof(null===(r=qt.brokerEventHandlers)||void 0===r?void 0:r.onReconnected)&&qt.brokerEventHandlers.onReconnected(t),await te().catch(()=>{})}),e.onclose(t=>{Wt.log("_connect: Broker connection closed:",t,e.connectionState,e.receivedHandshakeResponse),Vt.handle("connection_failed")}),e.start().then(()=>{Wt.log("_connect: Broker connection.start() successful:",e,e.connectionState,e.receivedHandshakeResponse),Vt.handle("connection_ok",e)}).catch(t=>{Wt.log("_connect: Broker connection.start() error: ",t,e,e.connectionState),Vt.handle("connection_failed",t)})},zt=()=>{var t;return"connected"===(null===(t=Vt)||void 0===t?void 0:t.getState())},Kt=()=>!Vt||"disconnected"===Vt.getState(),$t=()=>new Promise((t,e)=>{if(zt())t(Vt.getConnection());else{const r=Vt.on("transition",n=>{"connected"===n.toState?(t(Vt.getConnection()),r.off()):"disconnected"!==n.toState&&"reconnect_wait"!==n.toState||(e(),r.off())});Vt.handle("connect")}}),Yt=()=>new Promise(t=>{if(Kt())t();else{const e=Vt.on("transition",r=>{"disconnected"===r.toState&&(t(),e.off())});Vt.handle("disconnect")}}),Jt=async()=>{await Yt();const t=await $t();return te().then(t=>{Wt.log("reConnectToBroker: all topics re-subscribed:",t)}).catch(()=>{}),t},Xt=()=>$t(),Qt=t=>{var e;if(null!==(e=t=Lt(t))&&void 0!==e&&e.subscriberRef){var r,n;null===(r=(n=t).onSubscriptionEnd)||void 0===r||r.call(n);try{t.subscriberRef.dispose(),Wt.log("topic subscriber disposed")}catch(t){Wt.log("Exception disposing topic subscriber:",t)}t.subscriberRef=null}},Zt=function(t){const{getConnection:e,unsubscribe:r,getOptions:n,getDebug:o,resubscribeDelay:i=1,reconnectMaxRetries:s=60}=t;let c=0;const a=(t,e,r)=>{const n=o();return new Promise((o,i)=>{const s=[],c=r<0,a={next:t=>s.push(t),complete:()=>o(c?s.reverse():s),error:t=>{n.error("getTopic(): Get stream error:",t),i(t)}};(c?jt(t,e,-r):Rt(t,e,r)).subscribe(a)})};async function u(t){const i=o();if(i.log("_getAndStreamSubscription:",t),r(t),!(t=Lt(t)))throw"abort";const s=++c;let u;t.subscribeInvocationId=s,i.log("_getAndStreamSubscription currentSubscribeInvocationId:",s);try{u=await e()}catch(e){throw i.error('_getAndStreamSubscription: Exception from getConnection("'+t+'"):',e,"invocationId:",s),{errorCode:Ut.BROKER_CONNECT_ERROR,errorMessage:"Could not connect to broker (from _getAndStreamSubscription)",err:e}}if(i.log("_getAndStreamSubscription: gotConnection:",u),(t=Lt(t)).subscribeInvocationId!==s)throw i.log("_getAndStreamSubscription: A newer subscription has been invoked while waiting for connection - abort this one..."),"abort";t.subscriberRef&&r(t);let h=t.lastReceivedEventId<0&&("number"!=typeof t.fromEventId||t.fromEventId===t.options.topicStartEventId),p=h?t.options.topicStartEventId:t.lastReceivedEventId>=0?t.lastReceivedEventId+1:t.fromEventId;const f=n(),g="boolean"==typeof t.streamingSubscribeOnly?t.streamingSubscribeOnly:f.streamingSubscribeOnly,d="boolean"==typeof t.streamingSubscribeOnResume?t.streamingSubscribeOnResume:f.streamingSubscribeOnResume,v=g||d&&!h?Promise.resolve([]):(i.log("_getAndStreamSubscription: 'Get': ",t," from: ",p,"invocationId:",s),a(u,t,p));let b;try{b=await v}catch(e){var y;throw i.error('_getAndStreamSubscription: Exception from getTopic("'+t+'"):',e,"invocationId:",s,u,null===(y=u)||void 0===y?void 0:y.connectionState),{errorCode:Ut.TOPIC_GET_ERROR,errorMessage:"Error getting topic: "+t,err:e}}if((t=Lt(t)).subscribeInvocationId!==s)throw i.log("_getAndStreamSubscription: A newer subscription to this topic has been invoked while waiting for getTopic() - abort this one..."),"abort";if(b&&Array.isArray(b)&&b.length){i.log("_getAndStreamSubscription: Got topic eventsArray:",b,"invocationId:",s);try{b=b.filter(e=>{const r=e[t.options.eventIdProperty];if(r<t.lastReceivedEventId+1)return i.error("Error: Broker event id in response-array from 'Get' out of order (old event received). Expected "+(t.lastReceivedEventId+1)+", received "+r,e,"invocationId:",s),i.log("Skipping event..."),!1;if(-1!==t.lastReceivedEventId&&r>t.lastReceivedEventId+1)throw i.error("Error: Broker event id in response-array from 'Get' out of order (gap - event(s) missing). Expected "+(t.lastReceivedEventId+1)+", received "+r,e,"invocationId:",s),Ut.TOPIC_STREAM_OUT_OF_ORDER;return t.lastReceivedEventId=r,!0});const e=h?wt.STATE:wt.STREAMED_CHUNK,r=St(b,e,"invocationId: "+s,i);t.onDataReceived(r.eventsArray,r.receivedAs)}catch(e){return e===Ut.TOPIC_STREAM_OUT_OF_ORDER?i.log("Unrecoverable error: Re-subscribing to topic..."):i.log("Unknown error:",e),l(t)}p=t.lastReceivedEventId+1}try{var _,m;return i.log("_getAndStreamSubscription: 'Subscribe': ",t," from id: ",p,"invocationId:",s),t.subscriberRef=At(u,t,p).subscribe({next:e=>{const r=e[t.options.eventIdProperty];if(r<t.lastReceivedEventId+1)i.error("Error: Broker event id in 'Subscribe'-stream out of order (old event received). Expected "+(t.lastReceivedEventId+1)+", received "+r,e,"invocationId:",s),i.log("Skipping event...");else if(-1!==t.lastReceivedEventId&&r>t.lastReceivedEventId+1)i.error("Error: Broker event id in 'Subscribe'-stream out of order: (gap - event(s) missing). Expected "+(t.lastReceivedEventId+1)+", received "+r,e,"invocationId:",s),i.log("Re-subscribing to topic..."),l(t,!0).catch(t=>{i.log("Error resubscribing to topic (subscribe, stream out of order, gap)",t)});else{const n=St(e,wt.STREAM,"invocationId: "+s,i);t.onDataReceived(n.eventsArray,n.receivedAs),t.lastReceivedEventId=r}},complete:()=>{var e,r;i.log('Stream completed on "'+t+'"',"invocationId:",s),null===(e=(r=t).onSubscriptionStreamComplete)||void 0===e||e.call(r)},error:e=>{var r,n;i.error('Stream error on "'+t+'":',e,u,u.connectionState,"invocationId:",s),null===(r=(n=t).onSubscriptionError)||void 0===r||r.call(n,e)}}),null===(_=(m=t).onSubscriptionStart)||void 0===_||_.call(m),t.subscriberRef}catch(e){throw i.error('Exception subscribing to topic "'+t+'":',e,"invocationId:",s,u,u.connectionState),{errorCode:Ut.TOPIC_SUBSCRIBE_ERROR,errorMessage:"Error subscribing to topic: "+t,err:e}}}const l=(t,e)=>e?Ot(()=>u(t),1e3*i,s,"abort"):u(t);return{getTopic:a,getAndStreamSubscription:l}}({getConnection:Xt,unsubscribe:Qt,getOptions:()=>qt,getDebug:()=>Wt,resubscribeDelay:1,reconnectMaxRetries:60}),te=()=>{const t=[];return Nt().forEach(e=>{Wt.log("reSubscribeAll: Re-subscribing to subscription: ",e),t.push(Zt.getAndStreamSubscription(e,!0).catch(t=>{Wt.warn('reSubscribeAll: Error re-subscribing to subscription: "'+e+'"',t)}))}),Promise.all(t)},ee=()=>{Nt().forEach(Qt)},re={_signalr:t,init:async function(t){var e;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;const i="true"===Tt("pzl-streaming-debug");Wt=i&&console||o||xt;const s=Tt("pzl-broker-log-level")||i&&"info"||null;if(Vt||(Vt=kt({_connect:Gt,reSubscribeAll:te,unSubscribeAll:ee},n,Wt)),r.brokerTransport=r.brokerTransport||"WebSockets",r.brokerLogLevel=s||r.brokerLogLevel||"none",r.streamingSubscribeOnly=!!r.streamingSubscribeOnly||!1,r.streamingSubscribeOnResume=!1!==r.streamingSubscribeOnResume,r.access_token=r.access_token||await(null===(e=r.accessTokenFactory)||void 0===e?void 0:e.call(r))||null,!(t&&t!==qt.brokerUrl||r.access_token!==qt.access_token||r.brokerTransport!==qt.brokerTransport||r.brokerLogLevel!==qt.brokerLogLevel))return"no change";if(qt=Bt(Bt(Bt({},qt),{},{brokerUrl:t},r),{},{brokerEventHandlers:n}),Vt.setEventCallbacks(n),Wt.log("Initializing StreamConnector"),Wt.log("SignalR client lib version:",T),Kt())return"disconnected";try{const t=await Jt();return Wt.log("StreamConnector: broker config changed: Successfully re-connected to broker",t),"re-connected"}catch(t){throw Wt.error("StreamConnector: broker config changed: Error re-connecting to broker",t),"Error re-connecting"}},updateAccessToken:async t=>{var e,r;if(!Vt)throw new Error("StreamConnection not initialized. This function can only be called after init");if((t=t||await(null===(e=(r=qt).accessTokenFactory)||void 0===e?void 0:e.call(r))||null)!==qt.access_token){if(qt.access_token=t,Wt.log("StreamConnector.updateAccessToken(): new access_token"),!Kt())try{const t=await Jt();return Wt.log("StreamConnector.updateAccessToken(): Successfully re-connected to broker",t),"re-connected"}catch(t){throw Wt.error("StreamConnector.updateAccessToken(): Error re-connecting to broker",t),"Error re-connecting"}}else Wt.log("StreamConnector.updateAccessToken(): access_token not changed => Do nothing")},getStreamSubscriptions:()=>Nt(),addStreamSubscription:(t,e)=>{return Wt.log("addStreamSubscription:",t,e),Qt(t),(t=>{Ft(Lt(t)),Mt.push(t)})(t),e?(r=Zt.getAndStreamSubscription(t),n=e,Promise.race([r,Et(n).then(()=>{throw new Error("timeout")})])):Zt.getAndStreamSubscription(t);var r,n},removeStreamSubscription:t=>{var e;Wt.log("removeStreamSubscription:",t),"string"==typeof t&&(t=(e=t)&&Mt.find(t=>t.getSubscriptionId()===e)||null),t&&(Qt(t),Ft(t)),Nt().length<1&&(Wt.log("No more subscriptions - disconnecting from broker"),Yt().catch(()=>{}))},publishTopicIfConnected:(t,e)=>zt()?(async(t,e)=>{const r=await Xt();try{return await Dt(r,t,e,qt)}catch(t){throw Wt.log("Exception in publishTopic: ",t),t}})(t,e):Promise.reject("Not connected")};class ne{constructor(){this.options={topicProperty:"topic",topicStartEventId:1,eventIdProperty:"id",getMethod:"Get",streamMethod:"Subscribe"},this.topic="",this.fromEventId=null,this.subscribeInvocationId=-1,this.subscriberRef=null,this.lastReceivedEventId=-1,this.onDataReceived=function(){},this.onSubscriptionStart=null,this.onSubscriptionEnd=null,this.getSubscriptionId=function(){return this[this.options.topicProperty]},this.toString=function(){return this.getSubscriptionId()}}}const oe=class extends ne{constructor(t){super();for(const[e,r]of Object.entries(t))this[e]=Ct(this[e],r)}}})(),n})());